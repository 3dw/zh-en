import{c as me,b as _,h as N,d as Ae,ax as Pe,ay as _e,ad as C,a2 as Se,az as qe,a3 as Qe,r as i,aA as Ve,a4 as Ie,a6 as v,a7 as De,a8 as s,ac as t,a9 as l,A as ae,ag as $e,ai as y,ab as P,ak as g,av as D,aa as q,ah as F,aB as Ee,al as U,aj as H,am as le,an as Me,aq as Fe,y as R,af as oe,z as te,ao as se}from"./index-BTiaktO6.js";import{Q as ie}from"./QSpinnerDots-BLoWA6XG.js";import{Q as re}from"./QImg-hrdLeJIL.js";import{Q as Re}from"./QPage-dCvdD5ep.js";import{C as ue}from"./ClosePopup-DRbd9WF0.js";const We=me({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:n}){const h=_(()=>{const z=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(f=>e[f]===!0).map(f=>`q-btn-group--${f}`).join(" ");return`q-btn-group row no-wrap${z.length!==0?" "+z:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>N("div",{class:h.value},Ae(n.default))}}),je=me({name:"QBtnToggle",props:{...Pe,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(n=>("label"in n||"icon"in n||"slot"in n)&&"value"in n)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:n,emit:h}){const z=_(()=>e.options.find(u=>u.value===e.modelValue)!==void 0),f=_(()=>({type:"hidden",name:e.name,value:e.modelValue})),$=qe(f),a=_(()=>_e(e)),p=_(()=>({rounded:e.rounded,dense:e.dense,...a.value})),S=_(()=>e.options.map((u,d)=>{const{attrs:V,value:B,slot:E,...c}=u;return{slot:E,props:{key:d,"aria-pressed":B===e.modelValue?"true":"false",...V,...c,...p.value,disable:e.disable===!0||c.disable===!0,color:B===e.modelValue?r(c,"toggleColor"):r(c,"color"),textColor:B===e.modelValue?r(c,"toggleTextColor"):r(c,"textColor"),noCaps:r(c,"noCaps")===!0,noWrap:r(c,"noWrap")===!0,size:r(c,"size"),padding:r(c,"padding"),ripple:r(c,"ripple"),stack:r(c,"stack")===!0,stretch:r(c,"stretch")===!0,onClick(M){W(B,u,M)}}}}));function W(u,d,V){e.readonly!==!0&&(e.modelValue===u?e.clearable===!0&&(h("update:modelValue",null,null),h("clear")):h("update:modelValue",u,d),h("click",V))}function r(u,d){return u[d]===void 0?e[d]:u[d]}function Q(){const u=S.value.map(d=>N(C,d.props,d.slot!==void 0?n[d.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&z.value===!0&&$(u,"push"),Se(n.default,u)}return()=>N(We,{class:"q-btn-toggle",...a.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},Q)}}),O=Qe({name:"RelationshipPage",setup(){const e=i("listening"),n=i(!1),h=i(""),z=i(""),f=i(""),$=i(!1),a=i(!1),p=i({x:0,y:0}),S=i({x:0,y:0}),W=200,r=300,Q=2.5,u=i(null),d=i({$el:document.createElement("div"),clientWidth:0,clientHeight:0}),V=_(()=>{if(!d.value?.$el)return"";const o=d.value.$el.querySelector("img");if(!o)return"";const m=o.naturalWidth/o.naturalHeight,w=o.clientWidth/o.clientHeight;return m>w?`${o.clientWidth*Q}px auto`:`auto ${o.clientHeight*Q}px`}),B={en:"Queen Elizabeth II married Prince Philip on November 20, 1947. They had four children: Charles, Anne, Andrew, and Edward.",zh:"伊莉莎白二世女王於1947年11月20日與菲利普親王結婚。他們育有四個孩子：查爾斯、安妮、安德魯和愛德華。"},E=[B,{en:"Prince Charles and Diana had two children: William and Harry.",zh:"查爾斯王子和戴安娜育有兩個孩子：威廉和哈利。"},{en:"Prince William married Catherine on April 29, 2011. They have three children: George, Charlotte, and Louis.",zh:"威廉王子於2011年4月29日與凱薩琳結婚。他們育有三個孩子：喬治、夏洛特和路易。"},{en:"Queen Elizabeth II is the grandmother of Prince William and Prince Harry.",zh:"伊莉莎白二世女王是威廉王子和哈利王子的祖母。"}],c={question:{en:"Prince Charles is the ______ of Queen Elizabeth II.",zh:"查爾斯王子是伊莉莎白二世女王的______。"},options:[{label:{en:"father",zh:"父親"},value:"father"},{label:{en:"son",zh:"兒子"},value:"son"},{label:{en:"brother",zh:"兄弟"},value:"brother"}],answer:"son"},M=[c,{question:{en:"Prince George is the ______ of Princess Charlotte.",zh:"喬治王子是夏洛特公主的______。"},options:[{label:{en:"brother",zh:"兄弟"},value:"brother"},{label:{en:"uncle",zh:"叔叔"},value:"uncle"},{label:{en:"cousin",zh:"表親"},value:"cousin"}],answer:"brother"}],j={question:{en:"Who is the mother of Prince George?",zh:"喬治王子的母親是誰？"},answer:"Catherine",answerZh:"凱薩琳"},X=[j,{question:{en:"What is the relationship between Queen Elizabeth II and Prince Louis?",zh:"伊莉莎白二世女王與路易斯王子之間的關係是什麼？"},answer:"Great-grandmother",answerZh:"曾祖母"}],Y=i(0),I=i(B),K=i(0),L=i(c),J=i(0),T=i(j),he=()=>{if(!I.value||!I.value.en){console.error("No story available.");return}const o=I.value.en.replace(/(\d+)/g,"$1,"),m=new SpeechSynthesisUtterance(o);m.lang="en-GB";const w=speechSynthesis.getVoices();m.voice=w.find(A=>A.lang==="en-GB")||w.find(A=>A.lang==="en-US")||w.find(A=>A.lang.startsWith("en"))||null,speechSynthesis.speak(m)},ge=()=>{const o=(Y.value+1)%E.length;Y.value=o;const m=E[o]??B;I.value=m},ve=()=>{const o=L.value;z.value===o.answer?h.value="答對了！":h.value=`答錯了。正確答案是：${o.answer}`,n.value=!0},fe=()=>{const o=(K.value+1)%M.length;K.value=o;const m=M[o]??c;L.value=m,z.value=""},pe=()=>{const o=T.value;f.value.toLowerCase()===o.answer.toLowerCase()?h.value="答對了！":h.value=`答錯了。正確答案是：${o.answer}`,n.value=!0},ye=()=>{const o=(J.value+1)%X.length;J.value=o;const m=X[o]??j;T.value=m,f.value=""},Ce=i([{name:"Princess Eugenie",nameZh:"尤金妮公主"},{name:"Prince Edward",nameZh:"愛德華王子"},{name:"Zara Tindall",nameZh:"扎拉·廷德爾"},{name:"Catherine",nameZh:"凱薩琳"}]),ze=i([{en:"daughter of Prince Andrew",zh:"安德魯王子的女兒",correctPerson:"Princess Eugenie"},{en:"son of Queen Elizabeth II",zh:"伊莉莎白二世女王的兒子",correctPerson:"Prince Edward"},{en:"daughter of Princess Anne",zh:"安妮公主的女兒",correctPerson:"Zara Tindall"},{en:"mother of Prince George, Princess Charlotte, and Prince Louis",zh:"喬治王子、夏洛特公主和路易王子的母親",correctPerson:"Catherine"}]),b=i(null),k=i(null),G=i([]),Be=o=>{b.value=o,ee()},be=o=>{k.value=o,ee()},ee=()=>{b.value&&k.value&&(k.value.correctPerson===b.value.name?(G.value.push({person:b.value,relation:k.value}),b.value=null,k.value=null):setTimeout(()=>{b.value=null,k.value=null},1e3))};return{gameMode:e,currentStory:I,currentQuiz:L,currentAdvanced:T,userAnswer:z,advancedAnswer:f,showResult:n,resultMessage:h,speakStory:he,nextStory:ge,checkAnswer:ve,nextQuiz:fe,checkAdvancedAnswer:pe,nextAdvanced:ye,matchingPeople:Ce,matchingRelations:ze,selectedPerson:b,selectedRelation:k,matchedPairs:G,selectPerson:Be,selectRelation:be,resetMatching:()=>{b.value=null,k.value=null,G.value=[]},showImageDialog:$,showMagnifier:a,magnifierPos:p,magnifierSize:W,magnifiedSize:r,zoomLevel:Q,handleMouseMove:o=>{if(!u.value||!d.value?.$el)return;const m=u.value.getBoundingClientRect(),w=o.clientX-m.left,A=o.clientY-m.top,ne=d.value.$el.getBoundingClientRect(),ke=o.clientX-ne.left,we=o.clientY-ne.top;p.value={x:ke,y:we};let x=w+20,Z=A;x+r>m.width&&(x=w-r-20),Z+r>m.height&&(Z=m.height-r),S.value={x,y:Z}},handleClick:()=>{a.value=!a.value},imageContainer:u,mainImage:d,magnifiedPos:S,calculateBackgroundSize:V}}}),de=()=>{Ve(e=>({"5ed4e11c":e.magnifiedSize+"px"}))},ce=O.setup;O.setup=ce?(e,n)=>(de(),ce(e,n)):de;const Le={class:"row items-center q-mb-md"},Te={class:"col"},Ge={class:"row q-mb-lg justify-center"},xe={class:"row q-mt-lg"},Ze={class:"col-12 col-md-7 q-pr-md"},Ue={class:"col-12 col-md-5"},He={key:0,class:"game-section"},Ne={class:"text-body1 q-mt-md"},Oe={class:"english-text"},Xe={class:"chinese-text q-mt-sm"},Ye={key:1,class:"game-section"},Ke={class:"text-body1 q-mt-md"},Je={class:"english-text"},en={class:"chinese-text q-mt-sm"},nn={class:"q-mt-md"},an={key:2,class:"game-section"},ln={class:"matching-container q-mt-md"},on={class:"people-list"},tn=["onClick"],sn={class:"english-text"},rn={class:"chinese-text"},un={class:"relations-list"},dn=["onClick"],cn={class:"english-text"},mn={class:"chinese-text"},hn={class:"matched-pairs q-mt-lg"},gn={class:"pair-text"},vn={key:3,class:"game-section"},fn={class:"text-body1 q-mt-md"},pn={class:"english-text"},yn={class:"chinese-text q-mt-sm"},Cn={class:"text-h6"};function zn(e,n,h,z,f,$){return v(),De(Re,{class:"q-pa-md"},{default:s(()=>[t("div",Le,[t("h1",Te,[l(ae,{name:"people",size:"md",color:"primary",class:"q-mr-sm"}),n[8]||(n[8]=$e(" 英國皇室家族關係稱謂學習 "))])]),t("div",Ge,[l(je,{modelValue:e.gameMode,"onUpdate:modelValue":n[0]||(n[0]=a=>e.gameMode=a),options:[{label:"聽力練習",value:"listening"},{label:"填空練習",value:"quiz"},{label:"配對題",value:"matching"},{label:"進階測驗",value:"advanced"}],color:"primary",class:"q-mb-md"},null,8,["modelValue"])]),t("div",xe,[t("div",Ze,[l(re,{src:"https://en.alearn.org.tw/images/royal_family.jpg",class:"family-tree-image cursor-pointer",fit:"contain",onClick:n[1]||(n[1]=a=>e.showImageDialog=!0)},{loading:s(()=>[l(ie,{color:"primary"})]),_:1})]),t("div",Ue,[e.gameMode==="listening"?(v(),y("div",He,[l(q,{class:"story-card"},{default:s(()=>[l(P,null,{default:s(()=>[n[9]||(n[9]=t("div",{class:"text-h6"},"家族故事 | Family Story",-1)),t("div",Ne,[t("div",Oe,g(e.currentStory.en),1),t("div",Xe,g(e.currentStory.zh),1)])]),_:1}),l(D,{align:"center"},{default:s(()=>[l(C,{color:"primary",icon:"volume_up",label:"播放故事",onClick:e.speakStory},null,8,["onClick"]),l(C,{color:"secondary",icon:"skip_next",label:"下一個",onClick:e.nextStory},null,8,["onClick"])]),_:1})]),_:1})])):F("",!0),e.gameMode==="quiz"?(v(),y("div",Ye,[l(q,{class:"quiz-card"},{default:s(()=>[l(P,null,{default:s(()=>[n[10]||(n[10]=t("div",{class:"text-h6"},"關係稱謂填空 | Relationship Quiz",-1)),t("div",Ke,[t("div",Je,g(e.currentQuiz.question.en),1),t("div",en,g(e.currentQuiz.question.zh),1)]),t("div",nn,[l(Ee,{modelValue:e.userAnswer,"onUpdate:modelValue":[n[2]||(n[2]=a=>e.userAnswer=a),e.checkAnswer],options:e.currentQuiz.options.map(a=>({label:`${a.label.en} (${a.label.zh})`,value:a.value})),type:"radio"},null,8,["modelValue","options","onUpdate:modelValue"])])]),_:1}),l(D,{align:"center"},{default:s(()=>[l(C,{color:"primary",icon:"check_circle",label:"檢查答案",onClick:e.checkAnswer,disable:!e.userAnswer},null,8,["onClick","disable"]),l(C,{color:"secondary",icon:"skip_next",label:"下一題",onClick:e.nextQuiz},null,8,["onClick"])]),_:1})]),_:1})])):F("",!0),e.gameMode==="matching"?(v(),y("div",an,[l(q,{class:"matching-card"},{default:s(()=>[l(P,null,{default:s(()=>[n[11]||(n[11]=t("div",{class:"text-h6"},"皇室關係配對 | Royal Family Matching",-1)),t("div",ln,[t("div",on,[(v(!0),y(U,null,H(e.matchingPeople,(a,p)=>(v(),y("div",{key:"person-"+p,class:le(["person-item",{selected:e.selectedPerson===a}]),onClick:S=>e.selectPerson(a)},[t("div",sn,g(a.name),1),t("div",rn,g(a.nameZh),1)],10,tn))),128))]),t("div",un,[(v(!0),y(U,null,H(e.matchingRelations,(a,p)=>(v(),y("div",{key:"relation-"+p,class:le(["relation-item",{selected:e.selectedRelation===a}]),onClick:S=>e.selectRelation(a)},[t("div",cn,g(a.en),1),t("div",mn,g(a.zh),1)],10,dn))),128))])]),t("div",hn,[(v(!0),y(U,null,H(e.matchedPairs,(a,p)=>(v(),y("div",{key:"pair-"+p,class:"matched-pair"},[l(ae,{name:"check_circle",color:"positive"}),t("span",gn,g(a.person.name)+" → "+g(a.relation.en),1)]))),128))])]),_:1}),l(D,{align:"center"},{default:s(()=>[l(C,{color:"primary",icon:"refresh",label:"重新開始",onClick:e.resetMatching},null,8,["onClick"])]),_:1})]),_:1})])):F("",!0),e.gameMode==="advanced"?(v(),y("div",vn,[l(q,{class:"advanced-card"},{default:s(()=>[l(P,null,{default:s(()=>[n[12]||(n[12]=t("div",{class:"text-h6"},"進階關係描述 | Advanced Relationship",-1)),t("div",fn,[t("div",pn,g(e.currentAdvanced.question.en),1),t("div",yn,g(e.currentAdvanced.question.zh),1)]),l(Me,{modelValue:e.advancedAnswer,"onUpdate:modelValue":n[3]||(n[3]=a=>e.advancedAnswer=a),outlined:"",label:"請輸入答案",class:"q-mt-md",onKeyup:Fe(e.checkAdvancedAnswer,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),l(D,{align:"center"},{default:s(()=>[l(C,{color:"primary",icon:"check_circle",label:"檢查答案",onClick:e.checkAdvancedAnswer},null,8,["onClick"]),l(C,{color:"secondary",icon:"skip_next",label:"下一題",onClick:e.nextAdvanced},null,8,["onClick"])]),_:1})]),_:1})])):F("",!0)])]),l(oe,{modelValue:e.showResult,"onUpdate:modelValue":n[4]||(n[4]=a=>e.showResult=a)},{default:s(()=>[l(q,null,{default:s(()=>[l(P,null,{default:s(()=>[t("div",Cn,g(e.resultMessage),1)]),_:1}),l(D,{align:"right"},{default:s(()=>[R(l(C,{flat:"",label:"關閉",color:"primary"},null,512),[[ue]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(oe,{modelValue:e.showImageDialog,"onUpdate:modelValue":n[7]||(n[7]=a=>e.showImageDialog=a)},{default:s(()=>[l(q,{style:{width:"90vw","max-width":"1200px"}},{default:s(()=>[l(P,{class:"row items-center justify-end"},{default:s(()=>[R(l(C,{icon:"close",flat:"",round:"",dense:""},null,512),[[ue]])]),_:1}),l(P,{class:"q-pa-none relative-position"},{default:s(()=>[t("div",{class:"image-container",onMousemove:n[5]||(n[5]=(...a)=>e.handleMouseMove&&e.handleMouseMove(...a)),onClick:n[6]||(n[6]=(...a)=>e.handleClick&&e.handleClick(...a)),ref:"imageContainer"},[l(re,{src:"https://en.alearn.org.tw/images/royal_family.jpg",style:{"max-height":"85vh"},fit:"contain",ref:"mainImage"},{loading:s(()=>[l(ie,{color:"primary"})]),_:1},512),R(t("div",{class:"magnifier-frame",style:se({left:`${e.magnifierPos.x-e.magnifierSize/2}px`,top:`${e.magnifierPos.y-e.magnifierSize/2}px`,width:`${e.magnifierSize}px`,height:`${e.magnifierSize}px`,backgroundImage:"url(https://en.alearn.org.tw/images/royal_family.jpg)",backgroundPosition:`${-e.magnifierPos.x*e.zoomLevel+e.magnifierSize/2}px ${-e.magnifierPos.y*e.zoomLevel+e.magnifierSize/2}px`,backgroundSize:e.calculateBackgroundSize})},null,4),[[te,e.showMagnifier]]),R(t("div",{class:"magnified-view",style:se({backgroundImage:"url(https://en.alearn.org.tw/images/royal_family.jpg)",backgroundPosition:`${-e.magnifierPos.x*e.zoomLevel+e.magnifiedSize/2}px ${-e.magnifierPos.y*e.zoomLevel+e.magnifiedSize/2}px`,backgroundSize:e.calculateBackgroundSize,left:e.magnifiedPos.x+"px",top:e.magnifiedPos.y+"px"})},null,4),[[te,e.showMagnifier]])],544)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const qn=Ie(O,[["render",zn],["__scopeId","data-v-80c27b8f"],["__file","RelationshipPage.vue"]]);export{qn as default};
