import{u as we,a as Se,Q as Z}from"./QIcon-DCJaeMeK.js";import{g as je,Q as P}from"./QBtn-aT0FQRJq.js";import{c as j,a as s,h as d,r as h,g as se,X as F,m as J,Y as We,G as Ge,Z as Ue,_ as Ze,I as A,J as Ne,K as k,M as r,L as o,N as He,Q as I,P as S,W as X,S as te,R as oe,O as be,V as Ke,k as Y,v as ke,U as ye}from"./index-CHVBivPn.js";import{h as re,c as ue}from"./render-C-3hGfZl.js";import{u as ce,a as de,Q as Xe}from"./QInput-jVPBhDFQ.js";import{Q as pe}from"./QSpinnerDots-BsB-Wckr.js";import{Q as Ce}from"./QImg-NJX-XoJu.js";import{a as L,Q as T}from"./QCard-BpIzv1r8.js";import{Q as U,C as _e}from"./ClosePopup-CjAlhzKk.js";import{u as me,a as ve}from"./use-dark-tSdNzsdt.js";import{Q as qe}from"./QDialog-CbOFfn5Q.js";import{Q as Ye}from"./QPage-CrPc5gp2.js";import"./vm-BLltaFXq.js";import"./Ripple-CZTM8r42.js";import"./use-id-D7z9giGK.js";import"./focus-manager-zjdVGI5d.js";import"./use-timeout-C8-6TpQf.js";const Je=j({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:a}){const n=s(()=>{const m=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(f=>e[f]===!0).map(f=>`q-btn-group--${f}`).join(" ");return`q-btn-group row no-wrap${m.length!==0?" "+m:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>d("div",{class:n.value},re(a.default))}}),en=j({name:"QBtnToggle",props:{...ce,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(a=>("label"in a||"icon"in a||"slot"in a)&&"value"in a)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:a,emit:n}){const m=s(()=>e.options.find(c=>c.value===e.modelValue)!==void 0),f=s(()=>({type:"hidden",name:e.name,value:e.modelValue})),y=de(f),l=s(()=>je(e)),_=s(()=>({rounded:e.rounded,dense:e.dense,...l.value})),B=s(()=>e.options.map((c,v)=>{const{attrs:t,value:C,slot:z,...p}=c;return{slot:z,props:{key:v,"aria-pressed":C===e.modelValue?"true":"false",...t,...p,..._.value,disable:e.disable===!0||p.disable===!0,color:C===e.modelValue?b(p,"toggleColor"):b(p,"color"),textColor:C===e.modelValue?b(p,"toggleTextColor"):b(p,"textColor"),noCaps:b(p,"noCaps")===!0,noWrap:b(p,"noWrap")===!0,size:b(p,"size"),padding:b(p,"padding"),ripple:b(p,"ripple"),stack:b(p,"stack")===!0,stretch:b(p,"stretch")===!0,onClick(Q){q(C,c,Q)}}}}));function q(c,v,t){e.readonly!==!0&&(e.modelValue===c?e.clearable===!0&&(n("update:modelValue",null,null),n("clear")):n("update:modelValue",c,v),n("click",t))}function b(c,v){return c[v]===void 0?e[v]:c[v]}function V(){const c=B.value.map(v=>d(P,v.props,v.slot!==void 0?a[v.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&m.value===!0&&y(c,"push"),ue(a.default,c)}return()=>d(Je,{class:"q-btn-toggle",...l.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},V)}});function Ve(e,a){const n=h(null),m=s(()=>e.disable===!0?null:d("span",{ref:n,class:"no-outline",tabindex:-1}));function f(y){const l=a.value;y!==void 0&&y.type.indexOf("key")===0?l!==null&&document.activeElement!==l&&l.contains(document.activeElement)===!0&&l.focus():n.value!==null&&(y===void 0||l!==null&&l.contains(y.target)===!0)&&n.value.focus()}return{refocusTargetEl:m,refocusTarget:f}}const Ae={xs:30,sm:35,md:40,lg:50,xl:60},nn=()=>d("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[d("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),d("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]),an=j({name:"QRadio",props:{...me,...we,...ce,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:a,emit:n}){const{proxy:m}=se(),f=ve(e,m.$q),y=Se(e,Ae),l=h(null),{refocusTargetEl:_,refocusTarget:B}=Ve(e,l),q=s(()=>F(e.modelValue)===F(e.val)),b=s(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(f.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),V=s(()=>{const g=e.color!==void 0&&(e.keepColor===!0||q.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${q.value===!0?"truthy":"falsy"}${g}`}),c=s(()=>(q.value===!0?e.checkedIcon:e.uncheckedIcon)||null),v=s(()=>e.disable===!0?-1:e.tabindex||0),t=s(()=>{const g={type:"radio"};return e.name!==void 0&&Object.assign(g,{".checked":q.value===!0,"^checked":q.value===!0?"checked":void 0,name:e.name,value:e.val}),g}),C=de(t);function z(g){g!==void 0&&(J(g),B(g)),e.disable!==!0&&q.value!==!0&&n("update:modelValue",e.val,g)}function p(g){(g.keyCode===13||g.keyCode===32)&&J(g)}function Q(g){(g.keyCode===13||g.keyCode===32)&&z(g)}Object.assign(m,{set:z});const R=nn();return()=>{const g=c.value!==null?[d("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[d(Z,{class:"q-radio__icon",name:c.value})])]:[R];e.disable!==!0&&C(g,"unshift"," q-radio__native q-ma-none q-pa-none");const $=[d("div",{class:V.value,style:y.value,"aria-hidden":"true"},g)];_.value!==null&&$.push(_.value);const D=e.label!==void 0?ue(a.default,[e.label]):re(a.default);return D!==void 0&&$.push(d("div",{class:"q-radio__label q-anchor--skip"},D)),d("div",{ref:l,class:b.value,tabindex:v.value,role:"radio","aria-label":e.label,"aria-checked":q.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:z,onKeydown:p,onKeyup:Q},$)}}}),Ie={...me,...we,...ce,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},Pe=["update:modelValue"];function xe(e,a){const{props:n,slots:m,emit:f,proxy:y}=se(),{$q:l}=y,_=ve(n,l),B=h(null),{refocusTargetEl:q,refocusTarget:b}=Ve(n,B),V=Se(n,Ae),c=s(()=>n.val!==void 0&&Array.isArray(n.modelValue)),v=s(()=>{const u=F(n.val);return c.value===!0?n.modelValue.findIndex(x=>F(x)===u):-1}),t=s(()=>c.value===!0?v.value!==-1:F(n.modelValue)===F(n.trueValue)),C=s(()=>c.value===!0?v.value===-1:F(n.modelValue)===F(n.falseValue)),z=s(()=>t.value===!1&&C.value===!1),p=s(()=>n.disable===!0?-1:n.tabindex||0),Q=s(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(n.disable===!0?" disabled":"")+(_.value===!0?` q-${e}--dark`:"")+(n.dense===!0?` q-${e}--dense`:"")+(n.leftLabel===!0?" reverse":"")),R=s(()=>{const u=t.value===!0?"truthy":C.value===!0?"falsy":"indet",x=n.color!==void 0&&(n.keepColor===!0||(e==="toggle"?t.value===!0:C.value!==!0))?` text-${n.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${u}${x}`}),g=s(()=>{const u={type:"checkbox"};return n.name!==void 0&&Object.assign(u,{".checked":t.value,"^checked":t.value===!0?"checked":void 0,name:n.name,value:c.value===!0?n.val:n.trueValue}),u}),$=de(g),D=s(()=>{const u={tabindex:p.value,role:e==="toggle"?"switch":"checkbox","aria-label":n.label,"aria-checked":z.value===!0?"mixed":t.value===!0?"true":"false"};return n.disable===!0&&(u["aria-disabled"]="true"),u});function O(u){u!==void 0&&(J(u),b(u)),n.disable!==!0&&f("update:modelValue",W(),u)}function W(){if(c.value===!0){if(t.value===!0){const u=n.modelValue.slice();return u.splice(v.value,1),u}return n.modelValue.concat([n.val])}if(t.value===!0){if(n.toggleOrder!=="ft"||n.toggleIndeterminate===!1)return n.falseValue}else if(C.value===!0){if(n.toggleOrder==="ft"||n.toggleIndeterminate===!1)return n.trueValue}else return n.toggleOrder!=="ft"?n.trueValue:n.falseValue;return n.indeterminateValue}function N(u){(u.keyCode===13||u.keyCode===32)&&J(u)}function G(u){(u.keyCode===13||u.keyCode===32)&&O(u)}const ee=a(t,z);return Object.assign(y,{toggle:O}),()=>{const u=ee();n.disable!==!0&&$(u,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const x=[d("div",{class:R.value,style:V.value,"aria-hidden":"true"},u)];q.value!==null&&x.push(q.value);const H=n.label!==void 0?ue(m.default,[n.label]):re(m.default);return H!==void 0&&x.push(d("div",{class:`q-${e}__label q-anchor--skip`},H)),d("div",{ref:B,class:Q.value,...D.value,onClick:O,onKeydown:N,onKeyup:G},x)}}const ln=()=>d("div",{key:"svg",class:"q-checkbox__bg absolute"},[d("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[d("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),d("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),tn=j({name:"QCheckbox",props:Ie,emits:Pe,setup(e){const a=ln();function n(m,f){const y=s(()=>(m.value===!0?e.checkedIcon:f.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>y.value!==null?[d("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[d(Z,{class:"q-checkbox__icon",name:y.value})])]:[a]}return xe("checkbox",n)}}),on=j({name:"QToggle",props:{...Ie,icon:String,iconColor:String},emits:Pe,setup(e){function a(n,m){const f=s(()=>(n.value===!0?e.checkedIcon:m.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),y=s(()=>n.value===!0?e.iconColor:null);return()=>[d("div",{class:"q-toggle__track"}),d("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},f.value!==void 0?[d(Z,{name:f.value,color:y.value})]:void 0)]}return xe("toggle",a)}}),Qe={radio:an,checkbox:tn,toggle:on},sn=Object.keys(Qe);function ie(e,a){if(typeof e=="function")return e;const n=e!==void 0?e:a;return m=>m[n]}const rn=j({name:"QOptionGroup",props:{...me,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(We),default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],name:String,type:{type:String,default:"radio",validator:e=>sn.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:a,slots:n}){const{proxy:{$q:m}}=se(),f=Array.isArray(e.modelValue);e.type==="radio"?f===!0&&console.error("q-option-group: model should not be array"):f===!1&&console.error("q-option-group: model should be array in your case");const y=ve(e,m),l=s(()=>Qe[e.type]),_=s(()=>ie(e.optionValue,"value")),B=s(()=>ie(e.optionLabel,"label")),q=s(()=>ie(e.optionDisable,"disable")),b=s(()=>e.options.map(t=>({val:_.value(t),name:t.name===void 0?e.name:t.name,disable:e.disable||q.value(t),leftLabel:t.leftLabel===void 0?e.leftLabel:t.leftLabel,color:t.color===void 0?e.color:t.color,checkedIcon:t.checkedIcon,uncheckedIcon:t.uncheckedIcon,dark:t.dark===void 0?y.value:t.dark,size:t.size===void 0?e.size:t.size,dense:e.dense,keepColor:t.keepColor===void 0?e.keepColor:t.keepColor}))),V=s(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),c=s(()=>{const t={role:"group"};return e.type==="radio"&&(t.role="radiogroup",e.disable===!0&&(t["aria-disabled"]="true")),t});function v(t){a("update:modelValue",t)}return()=>d("div",{class:V.value,...c.value},e.options.map((t,C)=>{const z=n["label-"+C]!==void 0?()=>n["label-"+C](t):n.label!==void 0?()=>n.label(t):void 0;return d("div",[d(l.value,{label:z===void 0?B.value(t):null,modelValue:e.modelValue,"onUpdate:modelValue":v,...b.value[C]},z)])}))}}),ge=Ge({name:"RelationshipPage",setup(){const e=h("listening"),a=h(!1),n=h(""),m=h(""),f=h(""),y=h(!1),l=h(!1),_=h({x:0,y:0}),B=h({x:0,y:0}),q=200,b=300,V=2.5,c=h(null),v=h({$el:document.createElement("div"),clientWidth:0,clientHeight:0}),t=s(()=>{if(!v.value?.$el)return"";const i=v.value.$el.querySelector("img");if(!i)return"";const w=i.naturalWidth/i.naturalHeight,K=i.clientWidth/i.clientHeight;return w>K?`${i.clientWidth*V}px auto`:`auto ${i.clientHeight*V}px`}),C={en:"Queen Elizabeth II married Prince Philip on November 20, 1947. They had four children: Charles, Anne, Andrew, and Edward.",zh:"伊莉莎白二世女王於1947年11月20日與菲利普親王結婚。他們育有四個孩子：查爾斯、安妮、安德魯和愛德華。"},z=[C,{en:"Prince Charles and Diana had two children: William and Harry.",zh:"查爾斯王子和戴安娜育有兩個孩子：威廉和哈利。"},{en:"Prince William married Catherine on April 29, 2011. They have three children: George, Charlotte, and Louis.",zh:"威廉王子於2011年4月29日與凱薩琳結婚。他們育有三個孩子：喬治、夏洛特和路易。"},{en:"Queen Elizabeth II is the grandmother of Prince William and Prince Harry.",zh:"伊莉莎白二世女王是威廉王子和哈利王子的祖母。"}],p={question:{en:"Prince Charles is the ______ of Queen Elizabeth II.",zh:"查爾斯王子是伊莉莎白二世女王的______。"},options:[{label:{en:"father",zh:"父親"},value:"father"},{label:{en:"son",zh:"兒子"},value:"son"},{label:{en:"brother",zh:"兄弟"},value:"brother"}],answer:"son"},Q=[p,{question:{en:"Prince George is the ______ of Princess Charlotte.",zh:"喬治王子是夏洛特公主的______。"},options:[{label:{en:"brother",zh:"兄弟"},value:"brother"},{label:{en:"uncle",zh:"叔叔"},value:"uncle"},{label:{en:"cousin",zh:"表親"},value:"cousin"}],answer:"brother"}],R={question:{en:"Who is the mother of Prince George?",zh:"喬治王子的母親是誰？"},answer:"Catherine",answerZh:"凱薩琳"},g=[R,{question:{en:"What is the relationship between Queen Elizabeth II and Prince Louis?",zh:"伊莉莎白二世女王與路易斯王子之間的關係是什麼？"},answer:"Great-grandmother",answerZh:"曾祖母"}],$=h(0),D=h(C),O=h(0),W=h(p),N=h(0),G=h(R),ee=()=>{const i=new SpeechSynthesisUtterance(D.value.en);i.lang="en-GB",speechSynthesis.speak(i)},u=()=>{const i=($.value+1)%z.length;$.value=i;const w=z[i]??C;D.value=w},x=()=>{const i=W.value;m.value===i.answer?n.value="答對了！":n.value=`答錯了。正確答案是：${i.answer}`,a.value=!0},H=()=>{const i=(O.value+1)%Q.length;O.value=i;const w=Q[i]??p;W.value=w,m.value=""},$e=()=>{const i=G.value;f.value.toLowerCase()===i.answer.toLowerCase()?n.value="答對了！":n.value=`答錯了。正確答案是：${i.answer}`,a.value=!0},De=()=>{const i=(N.value+1)%g.length;N.value=i;const w=g[i]??R;G.value=w,f.value=""},Me=h([{name:"Princess Eugenie",nameZh:"尤金妮公主"},{name:"Prince Edward",nameZh:"愛德華王子"},{name:"Zara Tindall",nameZh:"扎拉·廷德爾"},{name:"Catherine",nameZh:"凱薩琳"}]),Ee=h([{en:"daughter of Prince Andrew",zh:"安德魯王子的女兒",correctPerson:"Princess Eugenie"},{en:"son of Queen Elizabeth II",zh:"伊莉莎白二世女王的兒子",correctPerson:"Prince Edward"},{en:"daughter of Princess Anne",zh:"安妮公主的女兒",correctPerson:"Zara Tindall"},{en:"mother of Prince George, Princess Charlotte, and Prince Louis",zh:"喬治王子、夏洛特公主和路易王子的母親",correctPerson:"Catherine"}]),M=h(null),E=h(null),ne=h([]),Fe=i=>{M.value=i,he()},Re=i=>{E.value=i,he()},he=()=>{M.value&&E.value&&(E.value.correctPerson===M.value.name?(ne.value.push({person:M.value,relation:E.value}),M.value=null,E.value=null):setTimeout(()=>{M.value=null,E.value=null},1e3))};return{gameMode:e,currentStory:D,currentQuiz:W,currentAdvanced:G,userAnswer:m,advancedAnswer:f,showResult:a,resultMessage:n,speakStory:ee,nextStory:u,checkAnswer:x,nextQuiz:H,checkAdvancedAnswer:$e,nextAdvanced:De,matchingPeople:Me,matchingRelations:Ee,selectedPerson:M,selectedRelation:E,matchedPairs:ne,selectPerson:Fe,selectRelation:Re,resetMatching:()=>{M.value=null,E.value=null,ne.value=[]},showImageDialog:y,showMagnifier:l,magnifierPos:_,magnifierSize:q,magnifiedSize:b,zoomLevel:V,handleMouseMove:i=>{if(!c.value||!v.value?.$el)return;const w=c.value.getBoundingClientRect(),K=i.clientX-w.left,Le=i.clientY-w.top,fe=v.value.$el.getBoundingClientRect(),Oe=i.clientX-fe.left,Te=i.clientY-fe.top;_.value={x:Oe,y:Te};let ae=K+20,le=Le;ae+b>w.width&&(ae=K-b-20),le+b>w.height&&(le=w.height-b),B.value={x:ae,y:le}},handleClick:()=>{l.value=!l.value},imageContainer:c,mainImage:v,magnifiedPos:B,calculateBackgroundSize:t}}}),ze=()=>{Ue(e=>({"030c8d1a":e.magnifiedSize+"px"}))},Be=ge.setup;ge.setup=Be?(e,a)=>(ze(),Be(e,a)):ze;const un={class:"row items-center q-mb-md"},cn={class:"col"},dn={class:"row q-mb-lg justify-center"},mn={class:"row q-mt-lg"},vn={class:"col-12 col-md-7 q-pr-md"},gn={class:"col-12 col-md-5"},hn={key:0,class:"game-section"},fn={class:"text-body1 q-mt-md"},bn={class:"english-text"},kn={class:"chinese-text q-mt-sm"},yn={key:1,class:"game-section"},pn={class:"text-body1 q-mt-md"},Cn={class:"english-text"},_n={class:"chinese-text q-mt-sm"},qn={class:"q-mt-md"},zn={key:2,class:"game-section"},Bn={class:"matching-container q-mt-md"},wn={class:"people-list"},Sn=["onClick"],Vn={class:"english-text"},An={class:"chinese-text"},In={class:"relations-list"},Pn=["onClick"],xn={class:"english-text"},Qn={class:"chinese-text"},$n={class:"matched-pairs q-mt-lg"},Dn={class:"pair-text"},Mn={key:3,class:"game-section"},En={class:"text-body1 q-mt-md"},Fn={class:"english-text"},Rn={class:"chinese-text q-mt-sm"},Ln={class:"text-h6"};function On(e,a,n,m,f,y){return A(),Ne(Ye,{class:"q-pa-md"},{default:k(()=>[r("div",un,[r("h1",cn,[o(Z,{name:"people",size:"md",color:"primary",class:"q-mr-sm"}),a[8]||(a[8]=He(" 英國皇室家族關係稱謂學習 "))])]),r("div",dn,[o(en,{modelValue:e.gameMode,"onUpdate:modelValue":a[0]||(a[0]=l=>e.gameMode=l),options:[{label:"聽力練習",value:"listening"},{label:"填空練習",value:"quiz"},{label:"配對題",value:"matching"},{label:"進階測驗",value:"advanced"}],color:"primary",class:"q-mb-md"},null,8,["modelValue"])]),r("div",mn,[r("div",vn,[o(Ce,{src:"https://en.alearn.org.tw/images/royal_family.jpg",class:"family-tree-image cursor-pointer",fit:"contain",onClick:a[1]||(a[1]=l=>e.showImageDialog=!0)},{loading:k(()=>[o(pe,{color:"primary"})]),_:1})]),r("div",gn,[e.gameMode==="listening"?(A(),I("div",hn,[o(T,{class:"story-card"},{default:k(()=>[o(L,null,{default:k(()=>[a[9]||(a[9]=r("div",{class:"text-h6"},"家族故事 | Family Story",-1)),r("div",fn,[r("div",bn,S(e.currentStory.en),1),r("div",kn,S(e.currentStory.zh),1)])]),_:1}),o(U,{align:"center"},{default:k(()=>[o(P,{color:"primary",icon:"volume_up",label:"播放故事",onClick:e.speakStory},null,8,["onClick"]),o(P,{color:"secondary",icon:"skip_next",label:"下一個",onClick:e.nextStory},null,8,["onClick"])]),_:1})]),_:1})])):X("",!0),e.gameMode==="quiz"?(A(),I("div",yn,[o(T,{class:"quiz-card"},{default:k(()=>[o(L,null,{default:k(()=>[a[10]||(a[10]=r("div",{class:"text-h6"},"關係稱謂填空 | Relationship Quiz",-1)),r("div",pn,[r("div",Cn,S(e.currentQuiz.question.en),1),r("div",_n,S(e.currentQuiz.question.zh),1)]),r("div",qn,[o(rn,{modelValue:e.userAnswer,"onUpdate:modelValue":[a[2]||(a[2]=l=>e.userAnswer=l),e.checkAnswer],options:e.currentQuiz.options.map(l=>({label:`${l.label.en} (${l.label.zh})`,value:l.value})),type:"radio"},null,8,["modelValue","options","onUpdate:modelValue"])])]),_:1}),o(U,{align:"center"},{default:k(()=>[o(P,{color:"primary",icon:"check_circle",label:"檢查答案",onClick:e.checkAnswer,disable:!e.userAnswer},null,8,["onClick","disable"]),o(P,{color:"secondary",icon:"skip_next",label:"下一題",onClick:e.nextQuiz},null,8,["onClick"])]),_:1})]),_:1})])):X("",!0),e.gameMode==="matching"?(A(),I("div",zn,[o(T,{class:"matching-card"},{default:k(()=>[o(L,null,{default:k(()=>[a[11]||(a[11]=r("div",{class:"text-h6"},"皇室關係配對 | Royal Family Matching",-1)),r("div",Bn,[r("div",wn,[(A(!0),I(te,null,oe(e.matchingPeople,(l,_)=>(A(),I("div",{key:"person-"+_,class:be(["person-item",{selected:e.selectedPerson===l}]),onClick:B=>e.selectPerson(l)},[r("div",Vn,S(l.name),1),r("div",An,S(l.nameZh),1)],10,Sn))),128))]),r("div",In,[(A(!0),I(te,null,oe(e.matchingRelations,(l,_)=>(A(),I("div",{key:"relation-"+_,class:be(["relation-item",{selected:e.selectedRelation===l}]),onClick:B=>e.selectRelation(l)},[r("div",xn,S(l.en),1),r("div",Qn,S(l.zh),1)],10,Pn))),128))])]),r("div",$n,[(A(!0),I(te,null,oe(e.matchedPairs,(l,_)=>(A(),I("div",{key:"pair-"+_,class:"matched-pair"},[o(Z,{name:"check_circle",color:"positive"}),r("span",Dn,S(l.person.name)+" → "+S(l.relation.en),1)]))),128))])]),_:1}),o(U,{align:"center"},{default:k(()=>[o(P,{color:"primary",icon:"refresh",label:"重新開始",onClick:e.resetMatching},null,8,["onClick"])]),_:1})]),_:1})])):X("",!0),e.gameMode==="advanced"?(A(),I("div",Mn,[o(T,{class:"advanced-card"},{default:k(()=>[o(L,null,{default:k(()=>[a[12]||(a[12]=r("div",{class:"text-h6"},"進階關係描述 | Advanced Relationship",-1)),r("div",En,[r("div",Fn,S(e.currentAdvanced.question.en),1),r("div",Rn,S(e.currentAdvanced.question.zh),1)]),o(Xe,{modelValue:e.advancedAnswer,"onUpdate:modelValue":a[3]||(a[3]=l=>e.advancedAnswer=l),outlined:"",label:"請輸入答案",class:"q-mt-md",onKeyup:Ke(e.checkAdvancedAnswer,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),o(U,{align:"center"},{default:k(()=>[o(P,{color:"primary",icon:"check_circle",label:"檢查答案",onClick:e.checkAdvancedAnswer},null,8,["onClick"]),o(P,{color:"secondary",icon:"skip_next",label:"下一題",onClick:e.nextAdvanced},null,8,["onClick"])]),_:1})]),_:1})])):X("",!0)])]),o(qe,{modelValue:e.showResult,"onUpdate:modelValue":a[4]||(a[4]=l=>e.showResult=l)},{default:k(()=>[o(T,null,{default:k(()=>[o(L,null,{default:k(()=>[r("div",Ln,S(e.resultMessage),1)]),_:1}),o(U,{align:"right"},{default:k(()=>[Y(o(P,{flat:"",label:"關閉",color:"primary"},null,512),[[_e]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(qe,{modelValue:e.showImageDialog,"onUpdate:modelValue":a[7]||(a[7]=l=>e.showImageDialog=l)},{default:k(()=>[o(T,{style:{width:"90vw","max-width":"1200px"}},{default:k(()=>[o(L,{class:"row items-center justify-end"},{default:k(()=>[Y(o(P,{icon:"close",flat:"",round:"",dense:""},null,512),[[_e]])]),_:1}),o(L,{class:"q-pa-none relative-position"},{default:k(()=>[r("div",{class:"image-container",onMousemove:a[5]||(a[5]=(...l)=>e.handleMouseMove&&e.handleMouseMove(...l)),onClick:a[6]||(a[6]=(...l)=>e.handleClick&&e.handleClick(...l)),ref:"imageContainer"},[o(Ce,{src:"https://en.alearn.org.tw/images/royal_family.jpg",style:{"max-height":"85vh"},fit:"contain",ref:"mainImage"},{loading:k(()=>[o(pe,{color:"primary"})]),_:1},512),Y(r("div",{class:"magnifier-frame",style:ye({left:`${e.magnifierPos.x-e.magnifierSize/2}px`,top:`${e.magnifierPos.y-e.magnifierSize/2}px`,width:`${e.magnifierSize}px`,height:`${e.magnifierSize}px`,backgroundImage:"url(https://en.alearn.org.tw/images/royal_family.jpg)",backgroundPosition:`${-e.magnifierPos.x*e.zoomLevel+e.magnifierSize/2}px ${-e.magnifierPos.y*e.zoomLevel+e.magnifierSize/2}px`,backgroundSize:e.calculateBackgroundSize})},null,4),[[ke,e.showMagnifier]]),Y(r("div",{class:"magnified-view",style:ye({backgroundImage:"url(https://en.alearn.org.tw/images/royal_family.jpg)",backgroundPosition:`${-e.magnifierPos.x*e.zoomLevel+e.magnifiedSize/2}px ${-e.magnifierPos.y*e.zoomLevel+e.magnifiedSize/2}px`,backgroundSize:e.calculateBackgroundSize,left:e.magnifiedPos.x+"px",top:e.magnifiedPos.y+"px"})},null,4),[[ke,e.showMagnifier]])],544)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const ra=Ze(ge,[["render",On],["__scopeId","data-v-47427304"],["__file","RelationshipPage.vue"]]);export{ra as default};
