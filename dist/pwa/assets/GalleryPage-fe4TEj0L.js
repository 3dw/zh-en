import{N as _,r as b,b as A,_ as Q,P as o,R as i,S as d,V as r,U as l,Q as w,a0 as u,a1 as k,$ as c,W as f,Y as B,X as y,a2 as F}from"./index-BqQQo2XM.js";import{Q as V}from"./QInput-Px3NHUdN.js";import{Q as $}from"./QImg-CEu2rqhu.js";import{Q as C}from"./QCardSection-BgHrw949.js";import{Q as q}from"./QCard-azw-pE20.js";import{Q as I}from"./QPage-CSA2bfyn.js";import{g as P,s as S,r as E}from"./index.esm2017-CfvkYQ_h.js";import"./use-file-dom-props-D5Z5e3C-.js";import"./use-id-C0zVw0kC.js";import"./use-dark-BgO6Z7Tk.js";import"./focus-manager-DhdJisJs.js";import"./use-timeout-C_Z55UZq.js";import"./index.esm2017-DnFfU7Vi.js";const N=P(),U=_({name:"GalleryPage",props:{cards:{type:Array,default:()=>[]},user:{type:Object,default:()=>({})},users:{type:Array,default:()=>[]}},emits:["delete-card"],setup(a){const t=b(""),m=e=>a.users.find(n=>n.uid===e)?.photoURL||"https://cdn.quasar.dev/img/boy-avatar.png",p=A(()=>{if(!t.value)return a.cards;const e=t.value.toLowerCase();return a.cards.filter(s=>s.description.toLowerCase().includes(e))});return{getPhotoById:m,playCardAudio:e=>{if(e){const s=new SpeechSynthesisUtterance(e);s.lang="en-US",s.rate=.6,window.speechSynthesis.speak(s)}},deleteCard:e=>{if(window.confirm("確定要刪除這張卡片嗎？此動作無法復原。")){const s=a.cards.filter((n,v)=>v!==e);S(E(N,"cards"),s)}},searchQuery:t,filteredCards:p}}}),L={class:"word-card-list"},D={class:"search-bar q-mb-md"},G={class:"gallery-grid q-mt-lg flex flex-row-reverse flex-wrap-reverse"},T={class:"text-body1"},j={class:"row q-mt-sm justify-between"},R={key:0,class:"text-body2"},O=["src"],W={key:1,class:"text-body2"};function X(a,t,m,p,g,h){return o(),i(I,{class:"q-pa-md"},{default:d(()=>[r("div",L,[t[2]||(t[2]=r("h1",null,"AI 圖片描述畫廊",-1)),r("div",D,[l(V,{modelValue:a.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>a.searchQuery=e),outlined:"",dense:"",placeholder:"搜尋圖片描述...",class:"search-input",clearable:""},{append:d(()=>[l(w,{name:"search"})]),_:1},8,["modelValue"])]),r("div",G,[(o(!0),u(F,null,k(a.filteredCards,(e,s)=>(o(),i(q,{key:s,class:"gallery-card q-ma-sm",flat:"",bordered:""},{default:d(()=>[l($,{src:e.image,ratio:1,class:"gallery-image"},null,8,["src"]),l(C,null,{default:d(()=>[r("div",T,c(e.description),1),r("div",j,[l(f,{color:"primary",icon:"volume_up",label:"播放發音",onClick:n=>a.playCardAudio(e.description),flat:""},null,8,["onClick"]),a.user&&a.user.isAdmin?(o(),i(f,{key:0,color:"negative",icon:"delete",label:"刪除",onClick:n=>a.deleteCard(s),flat:""},null,8,["onClick"])):B("",!0)])]),_:2},1024),l(C,null,{default:d(()=>[a.user&&a.user.isAdmin?(o(),u("div",R,[t[1]||(t[1]=y(" upload by ")),r("img",{src:a.getPhotoById(e.createdBy||"未知"),class:"avatar"},null,8,O),y(" "+c((e.createdAt||"未知").split("T")[0]),1)])):(o(),u("div",W," upload at "+c((e.createdAt||"未知").split("T")[0]),1))]),_:2},1024)]),_:2},1024))),128))])])]),_:1})}const oe=Q(U,[["render",X],["__scopeId","data-v-6a9ed407"],["__file","GalleryPage.vue"]]);export{oe as default};
