import{c as j,b as f,h as w,d as Ae,a7 as Pe,W as B,M as qe,Q as Y,a8 as Qe,j as Ve,N as Ie,r as u,a9 as De,_ as $e,P as k,R as Me,S as r,V as t,U as a,X as Ee,a0 as z,$ as y,Y as L,a2 as H,a1 as N,Z as te,a5 as Fe,k as x,v as ie,a3 as se}from"./index-ogN80PY1.js";import{b as Re,c as Le}from"./use-id-ByTOMxm9.js";import{Q as re}from"./QSpinnerDots-DMfFFOUY.js";import{Q as ue}from"./QImg-Cqj6pXX9.js";import{Q as D}from"./QCardSection-CTWtOoZj.js";import{Q as F,C as de}from"./ClosePopup-B9vyqB2f.js";import{Q as $}from"./QCard-pvLSlSOR.js";import{Q as xe}from"./QRadio-mLZkaJiF.js";import{u as je,a as We,b as Oe,Q as Te}from"./QCheckbox-Dosa2wyi.js";import{u as Ge,a as Ue}from"./use-dark-DpO9ZDJ6.js";import{Q as Ze}from"./QInput-DBauZuK9.js";import{Q as ce}from"./QDialog-RD_eeNOT.js";import{Q as He}from"./QPage-Db9eiev5.js";import"./use-timeout-D5cZhnC8.js";import"./option-sizes-D11zJPJN.js";import"./use-field-9eEjOZsc.js";import"./focus-manager-DhdJisJs.js";import"./use-file-dom-props-s9kiYV3V.js";import"./use-key-composition-Cg76UZ0t.js";import"./use-tick-DpqbZFDk.js";const Ne=j({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:n}){const s=f(()=>{const p=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(v=>e[v]===!0).map(v=>`q-btn-group--${v}`).join(" ");return`q-btn-group row no-wrap${p.length!==0?" "+p:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>w("div",{class:s.value},Ae(n.default))}}),Xe=j({name:"QBtnToggle",props:{...Re,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(n=>("label"in n||"icon"in n||"slot"in n)&&"value"in n)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:n,emit:s}){const p=f(()=>e.options.find(c=>c.value===e.modelValue)!==void 0),v=f(()=>({type:"hidden",name:e.name,value:e.modelValue})),S=Le(v),o=f(()=>Pe(e)),b=f(()=>({rounded:e.rounded,dense:e.dense,...o.value})),_=f(()=>e.options.map((c,m)=>{const{attrs:i,value:C,slot:V,...g}=c;return{slot:V,props:{key:m,"aria-pressed":C===e.modelValue?"true":"false",...i,...g,...b.value,disable:e.disable===!0||g.disable===!0,color:C===e.modelValue?d(g,"toggleColor"):d(g,"color"),textColor:C===e.modelValue?d(g,"toggleTextColor"):d(g,"textColor"),noCaps:d(g,"noCaps")===!0,noWrap:d(g,"noWrap")===!0,size:d(g,"size"),padding:d(g,"padding"),ripple:d(g,"ripple"),stack:d(g,"stack")===!0,stretch:d(g,"stretch")===!0,onClick(R){M(C,c,R)}}}}));function M(c,m,i){e.readonly!==!0&&(e.modelValue===c?e.clearable===!0&&(s("update:modelValue",null,null),s("clear")):s("update:modelValue",c,m),s("click",i))}function d(c,m){return c[m]===void 0?e[m]:c[m]}function Q(){const c=_.value.map(m=>w(B,m.props,m.slot!==void 0?n[m.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&p.value===!0&&S(c,"push"),qe(n.default,c)}return()=>w(Ne,{class:"q-btn-toggle",...o.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},Q)}}),Ye=j({name:"QToggle",props:{...je,icon:String,iconColor:String},emits:We,setup(e){function n(s,p){const v=f(()=>(s.value===!0?e.checkedIcon:p.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),S=f(()=>s.value===!0?e.iconColor:null);return()=>[w("div",{class:"q-toggle__track"}),w("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},v.value!==void 0?[w(Y,{name:v.value,color:S.value})]:void 0)]}return Oe("toggle",n)}}),he={radio:xe,checkbox:Te,toggle:Ye},Ke=Object.keys(he);function X(e,n){if(typeof e=="function")return e;const s=e!==void 0?e:n;return p=>p[s]}const Je=j({name:"QOptionGroup",props:{...Ge,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(Qe),default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],name:String,type:{type:String,default:"radio",validator:e=>Ke.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:n,slots:s}){const{proxy:{$q:p}}=Ve(),v=Array.isArray(e.modelValue);e.type==="radio"?v===!0&&console.error("q-option-group: model should not be array"):v===!1&&console.error("q-option-group: model should be array in your case");const S=Ue(e,p),o=f(()=>he[e.type]),b=f(()=>X(e.optionValue,"value")),_=f(()=>X(e.optionLabel,"label")),M=f(()=>X(e.optionDisable,"disable")),d=f(()=>e.options.map(i=>({val:b.value(i),name:i.name===void 0?e.name:i.name,disable:e.disable||M.value(i),leftLabel:i.leftLabel===void 0?e.leftLabel:i.leftLabel,color:i.color===void 0?e.color:i.color,checkedIcon:i.checkedIcon,uncheckedIcon:i.uncheckedIcon,dark:i.dark===void 0?S.value:i.dark,size:i.size===void 0?e.size:i.size,dense:e.dense,keepColor:i.keepColor===void 0?e.keepColor:i.keepColor}))),Q=f(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),c=f(()=>{const i={role:"group"};return e.type==="radio"&&(i.role="radiogroup",e.disable===!0&&(i["aria-disabled"]="true")),i});function m(i){n("update:modelValue",i)}return()=>w("div",{class:Q.value,...c.value},e.options.map((i,C)=>{const V=s["label-"+C]!==void 0?()=>s["label-"+C](i):s.label!==void 0?()=>s.label(i):void 0;return w("div",[w(o.value,{label:V===void 0?_.value(i):null,modelValue:e.modelValue,"onUpdate:modelValue":m,...d.value[C]},V)])}))}}),K=Ie({name:"RelationshipPage",setup(){const e=u("listening"),n=u(!1),s=u(""),p=u(""),v=u(""),S=u(!1),o=u(!1),b=u({x:0,y:0}),_=u({x:0,y:0}),M=200,d=300,Q=2.5,c=u(null),m=u({$el:document.createElement("div"),clientWidth:0,clientHeight:0}),i=f(()=>{if(!m.value?.$el)return"";const l=m.value.$el.querySelector("img");if(!l)return"";const h=l.naturalWidth/l.naturalHeight,q=l.clientWidth/l.clientHeight;return h>q?`${l.clientWidth*Q}px auto`:`auto ${l.clientHeight*Q}px`}),C={en:"Queen Elizabeth II married Prince Philip on November 20, 1947. They had four children: Charles, Anne, Andrew, and Edward.",zh:"伊莉莎白二世女王於1947年11月20日與菲利普親王結婚。他們育有四個孩子：查爾斯、安妮、安德魯和愛德華。"},V=[C,{en:"Prince Charles and Diana had two children: William and Harry.",zh:"查爾斯王子和戴安娜育有兩個孩子：威廉和哈利。"},{en:"Prince William married Catherine on April 29, 2011. They have three children: George, Charlotte, and Louis.",zh:"威廉王子於2011年4月29日與凱薩琳結婚。他們育有三個孩子：喬治、夏洛特和路易。"},{en:"Queen Elizabeth II is the grandmother of Prince William and Prince Harry.",zh:"伊莉莎白二世女王是威廉王子和哈利王子的祖母。"}],g={question:{en:"Prince Charles is the ______ of Queen Elizabeth II.",zh:"查爾斯王子是伊莉莎白二世女王的______。"},options:[{label:{en:"father",zh:"父親"},value:"father"},{label:{en:"son",zh:"兒子"},value:"son"},{label:{en:"brother",zh:"兄弟"},value:"brother"}],answer:"son"},R=[g,{question:{en:"Prince George is the ______ of Princess Charlotte.",zh:"喬治王子是夏洛特公主的______。"},options:[{label:{en:"brother",zh:"兄弟"},value:"brother"},{label:{en:"uncle",zh:"叔叔"},value:"uncle"},{label:{en:"cousin",zh:"表親"},value:"cousin"}],answer:"brother"}],W={question:{en:"Who is the mother of Prince George?",zh:"喬治王子的母親是誰？"},answer:"Catherine",answerZh:"凱薩琳"},J=[W,{question:{en:"What is the relationship between Queen Elizabeth II and Prince Louis?",zh:"伊莉莎白二世女王與路易斯王子之間的關係是什麼？"},answer:"Great-grandmother",answerZh:"曾祖母"}],ee=u(0),E=u(C),ne=u(0),O=u(g),oe=u(0),T=u(W),ve=()=>{if(!E.value||!E.value.en){console.error("No story available.");return}const l=E.value.en.replace(/(\d+)/g,"$1,"),h=new SpeechSynthesisUtterance(l);h.lang="en-GB";const q=speechSynthesis.getVoices();h.voice=q.find(I=>I.lang==="en-GB")||q.find(I=>I.lang==="en-US")||q.find(I=>I.lang.startsWith("en"))||null,speechSynthesis.speak(h)},fe=()=>{const l=(ee.value+1)%V.length;ee.value=l;const h=V[l]??C;E.value=h},pe=()=>{const l=O.value;p.value===l.answer?s.value="答對了！":s.value=`答錯了。正確答案是：${l.answer}`,n.value=!0},ye=()=>{const l=(ne.value+1)%R.length;ne.value=l;const h=R[l]??g;O.value=h,p.value=""},be=()=>{const l=T.value;v.value.toLowerCase()===l.answer.toLowerCase()?s.value="答對了！":s.value=`答錯了。正確答案是：${l.answer}`,n.value=!0},Ce=()=>{const l=(oe.value+1)%J.length;oe.value=l;const h=J[l]??W;T.value=h,v.value=""},ke=u([{name:"Princess Eugenie",nameZh:"尤金妮公主"},{name:"Prince Edward",nameZh:"愛德華王子"},{name:"Zara Tindall",nameZh:"扎拉·廷德爾"},{name:"Catherine",nameZh:"凱薩琳"}]),ze=u([{en:"daughter of Prince Andrew",zh:"安德魯王子的女兒",correctPerson:"Princess Eugenie"},{en:"son of Queen Elizabeth II",zh:"伊莉莎白二世女王的兒子",correctPerson:"Prince Edward"},{en:"daughter of Princess Anne",zh:"安妮公主的女兒",correctPerson:"Zara Tindall"},{en:"mother of Prince George, Princess Charlotte, and Prince Louis",zh:"喬治王子、夏洛特公主和路易王子的母親",correctPerson:"Catherine"}]),A=u(null),P=u(null),G=u([]),Be=l=>{A.value=l,ae()},we=l=>{P.value=l,ae()},ae=()=>{A.value&&P.value&&(P.value.correctPerson===A.value.name?(G.value.push({person:A.value,relation:P.value}),A.value=null,P.value=null):setTimeout(()=>{A.value=null,P.value=null},1e3))};return{gameMode:e,currentStory:E,currentQuiz:O,currentAdvanced:T,userAnswer:p,advancedAnswer:v,showResult:n,resultMessage:s,speakStory:ve,nextStory:fe,checkAnswer:pe,nextQuiz:ye,checkAdvancedAnswer:be,nextAdvanced:Ce,matchingPeople:ke,matchingRelations:ze,selectedPerson:A,selectedRelation:P,matchedPairs:G,selectPerson:Be,selectRelation:we,resetMatching:()=>{A.value=null,P.value=null,G.value=[]},showImageDialog:S,showMagnifier:o,magnifierPos:b,magnifierSize:M,magnifiedSize:d,zoomLevel:Q,handleMouseMove:l=>{if(!c.value||!m.value?.$el)return;const h=c.value.getBoundingClientRect(),q=l.clientX-h.left,I=l.clientY-h.top,le=m.value.$el.getBoundingClientRect(),Se=l.clientX-le.left,_e=l.clientY-le.top;b.value={x:Se,y:_e};let U=q+20,Z=I;U+d>h.width&&(U=q-d-20),Z+d>h.height&&(Z=h.height-d),_.value={x:U,y:Z}},handleClick:()=>{o.value=!o.value},imageContainer:c,mainImage:m,magnifiedPos:_,calculateBackgroundSize:i}}}),me=()=>{De(e=>({"5ed4e11c":e.magnifiedSize+"px"}))},ge=K.setup;K.setup=ge?(e,n)=>(me(),ge(e,n)):me;const en={class:"row items-center q-mb-md"},nn={class:"col"},on={class:"row q-mb-lg justify-center"},an={class:"row q-mt-lg"},ln={class:"col-12 col-md-7 q-pr-md"},tn={class:"col-12 col-md-5"},sn={key:0,class:"game-section"},rn={class:"text-body1 q-mt-md"},un={class:"english-text"},dn={class:"chinese-text q-mt-sm"},cn={key:1,class:"game-section"},mn={class:"text-body1 q-mt-md"},gn={class:"english-text"},hn={class:"chinese-text q-mt-sm"},vn={class:"q-mt-md"},fn={key:2,class:"game-section"},pn={class:"matching-container q-mt-md"},yn={class:"people-list"},bn=["onClick"],Cn={class:"english-text"},kn={class:"chinese-text"},zn={class:"relations-list"},Bn=["onClick"],wn={class:"english-text"},Sn={class:"chinese-text"},_n={class:"matched-pairs q-mt-lg"},An={class:"pair-text"},Pn={key:3,class:"game-section"},qn={class:"text-body1 q-mt-md"},Qn={class:"english-text"},Vn={class:"chinese-text q-mt-sm"},In={class:"text-h6"};function Dn(e,n,s,p,v,S){return k(),Me(He,{class:"q-pa-md"},{default:r(()=>[t("div",en,[t("h1",nn,[a(Y,{name:"people",size:"md",color:"primary",class:"q-mr-sm"}),n[8]||(n[8]=Ee(" 英國皇室家族關係稱謂學習 "))])]),t("div",on,[a(Xe,{modelValue:e.gameMode,"onUpdate:modelValue":n[0]||(n[0]=o=>e.gameMode=o),options:[{label:"聽力練習",value:"listening"},{label:"填空練習",value:"quiz"},{label:"配對題",value:"matching"},{label:"進階測驗",value:"advanced"}],color:"primary",class:"q-mb-md"},null,8,["modelValue"])]),t("div",an,[t("div",ln,[a(ue,{src:"https://en.alearn.org.tw/images/royal_family.jpg",class:"family-tree-image cursor-pointer",fit:"contain",onClick:n[1]||(n[1]=o=>e.showImageDialog=!0)},{loading:r(()=>[a(re,{color:"primary"})]),_:1})]),t("div",tn,[e.gameMode==="listening"?(k(),z("div",sn,[a($,{class:"story-card"},{default:r(()=>[a(D,null,{default:r(()=>[n[9]||(n[9]=t("div",{class:"text-h6"},"家族故事 | Family Story",-1)),t("div",rn,[t("div",un,y(e.currentStory.en),1),t("div",dn,y(e.currentStory.zh),1)])]),_:1}),a(F,{align:"center"},{default:r(()=>[a(B,{color:"primary",icon:"volume_up",label:"播放故事",onClick:e.speakStory},null,8,["onClick"]),a(B,{color:"secondary",icon:"skip_next",label:"下一個",onClick:e.nextStory},null,8,["onClick"])]),_:1})]),_:1})])):L("",!0),e.gameMode==="quiz"?(k(),z("div",cn,[a($,{class:"quiz-card"},{default:r(()=>[a(D,null,{default:r(()=>[n[10]||(n[10]=t("div",{class:"text-h6"},"關係稱謂填空 | Relationship Quiz",-1)),t("div",mn,[t("div",gn,y(e.currentQuiz.question.en),1),t("div",hn,y(e.currentQuiz.question.zh),1)]),t("div",vn,[a(Je,{modelValue:e.userAnswer,"onUpdate:modelValue":[n[2]||(n[2]=o=>e.userAnswer=o),e.checkAnswer],options:e.currentQuiz.options.map(o=>({label:`${o.label.en} (${o.label.zh})`,value:o.value})),type:"radio"},null,8,["modelValue","options","onUpdate:modelValue"])])]),_:1}),a(F,{align:"center"},{default:r(()=>[a(B,{color:"primary",icon:"check_circle",label:"檢查答案",onClick:e.checkAnswer,disable:!e.userAnswer},null,8,["onClick","disable"]),a(B,{color:"secondary",icon:"skip_next",label:"下一題",onClick:e.nextQuiz},null,8,["onClick"])]),_:1})]),_:1})])):L("",!0),e.gameMode==="matching"?(k(),z("div",fn,[a($,{class:"matching-card"},{default:r(()=>[a(D,null,{default:r(()=>[n[11]||(n[11]=t("div",{class:"text-h6"},"皇室關係配對 | Royal Family Matching",-1)),t("div",pn,[t("div",yn,[(k(!0),z(H,null,N(e.matchingPeople,(o,b)=>(k(),z("div",{key:"person-"+b,class:te(["person-item",{selected:e.selectedPerson===o}]),onClick:_=>e.selectPerson(o)},[t("div",Cn,y(o.name),1),t("div",kn,y(o.nameZh),1)],10,bn))),128))]),t("div",zn,[(k(!0),z(H,null,N(e.matchingRelations,(o,b)=>(k(),z("div",{key:"relation-"+b,class:te(["relation-item",{selected:e.selectedRelation===o}]),onClick:_=>e.selectRelation(o)},[t("div",wn,y(o.en),1),t("div",Sn,y(o.zh),1)],10,Bn))),128))])]),t("div",_n,[(k(!0),z(H,null,N(e.matchedPairs,(o,b)=>(k(),z("div",{key:"pair-"+b,class:"matched-pair"},[a(Y,{name:"check_circle",color:"positive"}),t("span",An,y(o.person.name)+" → "+y(o.relation.en),1)]))),128))])]),_:1}),a(F,{align:"center"},{default:r(()=>[a(B,{color:"primary",icon:"refresh",label:"重新開始",onClick:e.resetMatching},null,8,["onClick"])]),_:1})]),_:1})])):L("",!0),e.gameMode==="advanced"?(k(),z("div",Pn,[a($,{class:"advanced-card"},{default:r(()=>[a(D,null,{default:r(()=>[n[12]||(n[12]=t("div",{class:"text-h6"},"進階關係描述 | Advanced Relationship",-1)),t("div",qn,[t("div",Qn,y(e.currentAdvanced.question.en),1),t("div",Vn,y(e.currentAdvanced.question.zh),1)]),a(Ze,{modelValue:e.advancedAnswer,"onUpdate:modelValue":n[3]||(n[3]=o=>e.advancedAnswer=o),outlined:"",label:"請輸入答案",class:"q-mt-md",onKeyup:Fe(e.checkAdvancedAnswer,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),a(F,{align:"center"},{default:r(()=>[a(B,{color:"primary",icon:"check_circle",label:"檢查答案",onClick:e.checkAdvancedAnswer},null,8,["onClick"]),a(B,{color:"secondary",icon:"skip_next",label:"下一題",onClick:e.nextAdvanced},null,8,["onClick"])]),_:1})]),_:1})])):L("",!0)])]),a(ce,{modelValue:e.showResult,"onUpdate:modelValue":n[4]||(n[4]=o=>e.showResult=o)},{default:r(()=>[a($,null,{default:r(()=>[a(D,null,{default:r(()=>[t("div",In,y(e.resultMessage),1)]),_:1}),a(F,{align:"right"},{default:r(()=>[x(a(B,{flat:"",label:"關閉",color:"primary"},null,512),[[de]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ce,{modelValue:e.showImageDialog,"onUpdate:modelValue":n[7]||(n[7]=o=>e.showImageDialog=o)},{default:r(()=>[a($,{style:{width:"90vw","max-width":"1200px"}},{default:r(()=>[a(D,{class:"row items-center justify-end"},{default:r(()=>[x(a(B,{icon:"close",flat:"",round:"",dense:""},null,512),[[de]])]),_:1}),a(D,{class:"q-pa-none relative-position"},{default:r(()=>[t("div",{class:"image-container",onMousemove:n[5]||(n[5]=(...o)=>e.handleMouseMove&&e.handleMouseMove(...o)),onClick:n[6]||(n[6]=(...o)=>e.handleClick&&e.handleClick(...o)),ref:"imageContainer"},[a(ue,{src:"https://en.alearn.org.tw/images/royal_family.jpg",style:{"max-height":"85vh"},fit:"contain",ref:"mainImage"},{loading:r(()=>[a(re,{color:"primary"})]),_:1},512),x(t("div",{class:"magnifier-frame",style:se({left:`${e.magnifierPos.x-e.magnifierSize/2}px`,top:`${e.magnifierPos.y-e.magnifierSize/2}px`,width:`${e.magnifierSize}px`,height:`${e.magnifierSize}px`,backgroundImage:"url(https://en.alearn.org.tw/images/royal_family.jpg)",backgroundPosition:`${-e.magnifierPos.x*e.zoomLevel+e.magnifierSize/2}px ${-e.magnifierPos.y*e.zoomLevel+e.magnifierSize/2}px`,backgroundSize:e.calculateBackgroundSize})},null,4),[[ie,e.showMagnifier]]),x(t("div",{class:"magnified-view",style:se({backgroundImage:"url(https://en.alearn.org.tw/images/royal_family.jpg)",backgroundPosition:`${-e.magnifierPos.x*e.zoomLevel+e.magnifiedSize/2}px ${-e.magnifierPos.y*e.zoomLevel+e.magnifiedSize/2}px`,backgroundSize:e.calculateBackgroundSize,left:e.magnifiedPos.x+"px",top:e.magnifiedPos.y+"px"})},null,4),[[ie,e.showMagnifier]])],544)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const ao=$e(K,[["render",Dn],["__scopeId","data-v-80c27b8f"],["__file","RelationshipPage.vue"]]);export{ao as default};
