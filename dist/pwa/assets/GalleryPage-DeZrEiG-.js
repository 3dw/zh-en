import{N as h,r as v,b as Q,_ as b,P as n,R as i,S as l,V as r,U as o,Q as A,a0 as w,a1 as k,$ as m,W as p,Y as B,X as f,a2 as F}from"./index-B_p9LCS8.js";import{Q as V}from"./QInput-B9es4Hpi.js";import{Q as $}from"./QImg-D6eU8_Ee.js";import{Q as y}from"./QCardSection-DEJRrcOY.js";import{Q as q}from"./QCard-mAQD6hOW.js";import{Q as I}from"./QPage-BO8rmtVD.js";import{g as P,s as S,r as E}from"./index.esm2017-CfvkYQ_h.js";import"./use-file-dom-props-CJIAvruJ.js";import"./use-id-CT7ycECe.js";import"./use-dark-CwmpAggJ.js";import"./focus-manager-BJWzFvJg.js";import"./use-timeout-CxmNfYaA.js";import"./index.esm2017-DnFfU7Vi.js";const N=P(),U=h({name:"GalleryPage",props:{cards:{type:Array,default:()=>[]},user:{type:Object,default:()=>({})},users:{type:Array,default:()=>[]}},emits:["delete-card"],setup(a){const t=v(""),u=e=>a.users.find(d=>d.uid===e)?.photoURL||"https://cdn.quasar.dev/img/boy-avatar.png",c=Q(()=>{if(!t.value)return a.cards;const e=t.value.toLowerCase();return a.cards.filter(s=>s.description.toLowerCase().includes(e))});return{getPhotoById:u,playCardAudio:e=>{if(e){const s=new SpeechSynthesisUtterance(e);s.lang="en-US",s.rate=.6,window.speechSynthesis.speak(s)}},deleteCard:e=>{if(window.confirm("確定要刪除這張卡片嗎？此動作無法復原。")){const s=a.cards.filter((d,_)=>_!==e);S(E(N,"cards"),s)}},searchQuery:t,filteredCards:c}}}),L={class:"word-card-list"},D={class:"search-bar q-mb-md"},G={class:"gallery-grid q-mt-lg"},j={class:"text-body1"},R={class:"row q-mt-sm justify-between"},T={class:"text-body2"},O=["src"];function W(a,t,u,c,C,g){return n(),i(I,{class:"q-pa-md"},{default:l(()=>[r("div",L,[t[2]||(t[2]=r("h1",null,"AI 圖片描述畫廊",-1)),r("div",D,[o(V,{modelValue:a.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>a.searchQuery=e),outlined:"",dense:"",placeholder:"搜尋圖片描述...",class:"search-input",clearable:""},{append:l(()=>[o(A,{name:"search"})]),_:1},8,["modelValue"])]),r("div",G,[(n(!0),w(F,null,k(a.filteredCards,(e,s)=>(n(),i(q,{key:s,class:"gallery-card q-ma-sm",flat:"",bordered:""},{default:l(()=>[o($,{src:e.image,ratio:1,class:"gallery-image"},null,8,["src"]),o(y,null,{default:l(()=>[r("div",j,m(e.description),1),r("div",R,[o(p,{color:"primary",icon:"volume_up",label:"播放發音",onClick:d=>a.playCardAudio(e.description),flat:""},null,8,["onClick"]),a.user&&a.user.isAdmin?(n(),i(p,{key:0,color:"negative",icon:"delete",label:"刪除",onClick:d=>a.deleteCard(s),flat:""},null,8,["onClick"])):B("",!0)])]),_:2},1024),o(y,null,{default:l(()=>[r("div",T,[t[1]||(t[1]=f(" upload by ")),r("img",{src:a.getPhotoById(e.createdBy||"未知"),class:"avatar"},null,8,O),f(" "+m((e.createdAt||"未知").split("T")[0]),1)])]),_:2},1024)]),_:2},1024))),128))])])]),_:1})}const re=b(U,[["render",W],["__scopeId","data-v-0adae59a"],["__file","GalleryPage.vue"]]);export{re as default};
