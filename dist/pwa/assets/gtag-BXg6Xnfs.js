import{i as g,n as O,a as p}from"./index-DDwJF66H.js";function d(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function P(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function v(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?P(Object(r),!0).forEach(function(a){d(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}var U=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(a,t){if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");if(o.async=!0,o.src=n,o.defer=r.defer,r.preconnectOrigin){var u=document.createElement("link");u.href=r.preconnectOrigin,u.rel="preconnect",i.appendChild(u)}i.appendChild(o),o.onload=a,o.onerror=t}})},M=function e(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),t=1;t<r;t++)a[t-1]=arguments[t];if(!a.length)return n;var i=a.shift();if(!(!g(n)||!g(i))){for(var o in i)g(i[o])?(n[o]||Object.assign(n,d({},o,{})),e(n[o],i[o])):Object.assign(n,d({},o,i[o]));return e.apply(void 0,[n].concat(a))}},f=function(){return!(typeof window>"u"||typeof document>"u")},y=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;f()},C=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return y('Missing "appName" property inside the plugin options.',n.app_name==null),y('Missing "name" property in the route.',n.screen_name==null),n};function F(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=e.split("/"),a=n.split("/");return r[0]===""&&n[n.length-1]==="/"&&r.shift(),a.join("/")+r.join("/")}var J=function(){return{bootstrap:!0,onReady:null,onError:null,onBeforeTrack:null,onAfterTrack:null,pageTrackerTemplate:null,customResourceURL:"https://www.googletagmanager.com/gtag/js",customPreconnectOrigin:"https://www.googletagmanager.com",deferScriptLoad:!1,pageTrackerExcludedRoutes:[],pageTrackerEnabled:!0,enabled:!0,disableScriptLoad:!1,pageTrackerScreenviewEnabled:!1,appName:null,pageTrackerUseFullPath:!1,pageTrackerPrependBase:!0,pageTrackerSkipSamePath:!0,globalDataLayerName:"dataLayer",globalObjectName:"gtag",defaultGroupName:"default",includes:null,config:{id:null,params:{send_page_view:!1}}}},A={},W=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=J();A=M(r,n)},c=function(){return A},s=function(){var e,n=c(),r=n.globalObjectName;!f()||typeof window[r]>"u"||(e=window)[r].apply(e,arguments)},m=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=c(),t=a.config,i=a.includes;s.apply(void 0,["config",t.id].concat(n)),Array.isArray(i)&&i.forEach(function(o){s.apply(void 0,["config",o.id].concat(n))})},T=function(n,r){f()&&(window["ga-disable-".concat(n)]=r)},N=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=c(),r=n.config,a=n.includes;T(r.id,e),Array.isArray(a)&&a.forEach(function(t){return T(t.id,e)})},R=function(){N(!0)},q=function(){N(!1)},S,z=function(n){S=n},h=function(){return S},l=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=c(),a=r.includes,t=r.defaultGroupName;n.send_to==null&&Array.isArray(a)&&a.length&&(n.send_to=a.map(function(i){return i.id}).concat(t)),s("event",e,n)},w=function(e){if(f()){var n;if(typeof e=="string")n={page_path:e};else if(e.path||e.fullPath){var r=c(),a=r.pageTrackerUseFullPath,t=r.pageTrackerPrependBase,i=h(),o=i&&i.options.base,u=a?e.fullPath:e.path;n=v(v({},e.name&&{page_title:e.name}),{},{page_path:t?F(u,o):u})}else n=e;n.page_location==null&&(n.page_location=window.location.href),n.send_page_view==null&&(n.send_page_view=!0),l("page_view",n)}},D=function(e){var n=c(),r=n.appName;if(e){var a;typeof e=="string"?a={screen_name:e}:a=e,a.app_name=a.app_name||r,l("screen_view",a)}},I=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];l.apply(void 0,["exception"].concat(n))},K=function(e){m("linker",e)},$=function(e){l("timing_complete",e)},H=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];s.apply(void 0,["set"].concat(n))},Q=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];l.apply(void 0,["refund"].concat(n))},V=function(e){l("purchase",e)},X=function(e){m({custom_map:e})},Y=Object.freeze({__proto__:null,query:s,config:m,optOut:R,optIn:q,pageview:w,screenview:D,exception:I,linker:K,time:$,set:H,refund:Q,purchase:V,customMap:X,event:l}),Z=function(n){n.config.globalProperties.$gtag=Y},ee=function(){if(f()){var e=c(),n=e.enabled,r=e.globalObjectName,a=e.globalDataLayerName;return window[r]==null&&(window[a]=window[a]||[],window[r]=function(){window[a].push(arguments)}),window[r]("js",new Date),n||R(),window[r]}},j=function(n){return v({send_page_view:!1},n)},L=function(){var e=c(),n=e.config,r=e.includes;s("config",n.id,j(n.params)),Array.isArray(r)&&r.forEach(function(a){s("config",a.id,j(a.params))})},_=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=c(),a=r.appName,t=r.pageTrackerTemplate,i=r.pageTrackerScreenviewEnabled,o=r.pageTrackerSkipSamePath;if(!(o&&e.path===n.path)){var u=e;if(p(t)?u=t(e,n):i&&(u=C({app_name:a,screen_name:e.name})),i){D(u);return}w(u)}},E=function(n){var r=c(),a=r.pageTrackerExcludedRoutes;return a.includes(n.path)||a.includes(n.name)},ne=function(){var e=c(),n=e.onBeforeTrack,r=e.onAfterTrack,a=h();a.isReady().then(function(){O().then(function(){var t=a.currentRoute;L(),!E(t.value)&&_(t.value)}),a.afterEach(function(t,i){O().then(function(){E(t)||(p(n)&&n(t,i),_(t,i),p(r)&&r(t,i))})})})},re=function(){var e=c(),n=e.onReady,r=e.onError,a=e.globalObjectName,t=e.globalDataLayerName,i=e.config,o=e.customResourceURL,u=e.customPreconnectOrigin,B=e.deferScriptLoad,x=e.pageTrackerEnabled,G=e.disableScriptLoad,k=!!(x&&h());if(ee(),k?ne():L(),!G)return U("".concat(o,"?id=").concat(i.id,"&l=").concat(t),{preconnectOrigin:u,defer:B}).then(function(){n&&n(window[a])}).catch(function(b){return r&&r(b),b})},ae=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;Z(n),W(r),z(a),c().bootstrap&&re()};const ie=({app:e,router:n})=>{e.use(ae,{config:{id:"G-J5RJM4B7JW"}}),n.afterEach(r=>{w({page_path:r.fullPath,page_title:r.meta.title||document.title})})};export{ie as default};
