import{c as L,b as v,h as w,d as Ae,a7 as Pe,W as B,M as qe,Q as Y,a8 as Qe,j as Ve,N as Ie,r as u,a9 as De,_ as Me,P as k,R as $e,S as r,V as t,U as a,X as Ee,a0 as z,$ as y,Y as F,a2 as Z,a1 as H,Z as le,a5 as Fe,k as R,v as te,a3 as ie}from"./index-DjPobmbs.js";import{b as Re,c as Le}from"./use-id-DMIPX0cB.js";import{Q as se}from"./QSpinnerDots-GG8HXtlK.js";import{Q as re}from"./QImg-C0UYvVKr.js";import{Q as V}from"./QCardSection-C-R88YBs.js";import{Q as M,C as ue}from"./ClosePopup-C07JV6lT.js";import{Q as I}from"./QCard-DD8VmbjP.js";import{Q as xe}from"./QRadio-24_u-ud_.js";import{u as je,a as We,b as Oe,Q as Te}from"./QCheckbox-Imly67TC.js";import{u as Ge,a as Ue}from"./use-dark-Dqa76tW0.js";import{Q as Ze}from"./QInput-BeFq4QDw.js";import{Q as de}from"./QDialog-DowNTzHx.js";import{Q as He}from"./QPage-B26RM9U6.js";import"./use-timeout-DLbppMCe.js";import"./option-sizes-Bz6ohJKh.js";import"./use-file-dom-props-PR1H5nra.js";import"./focus-manager-DhdJisJs.js";import"./use-tick-mEIyQpEA.js";const Xe=L({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:n}){const s=v(()=>{const f=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(h=>e[h]===!0).map(h=>`q-btn-group--${h}`).join(" ");return`q-btn-group row no-wrap${f.length!==0?" "+f:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>w("div",{class:s.value},Ae(n.default))}}),Ye=L({name:"QBtnToggle",props:{...Re,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(n=>("label"in n||"icon"in n||"slot"in n)&&"value"in n)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:n,emit:s}){const f=v(()=>e.options.find(c=>c.value===e.modelValue)!==void 0),h=v(()=>({type:"hidden",name:e.name,value:e.modelValue})),S=Le(h),o=v(()=>Pe(e)),b=v(()=>({rounded:e.rounded,dense:e.dense,...o.value})),_=v(()=>e.options.map((c,m)=>{const{attrs:i,value:C,slot:Q,...g}=c;return{slot:Q,props:{key:m,"aria-pressed":C===e.modelValue?"true":"false",...i,...g,...b.value,disable:e.disable===!0||g.disable===!0,color:C===e.modelValue?d(g,"toggleColor"):d(g,"color"),textColor:C===e.modelValue?d(g,"toggleTextColor"):d(g,"textColor"),noCaps:d(g,"noCaps")===!0,noWrap:d(g,"noWrap")===!0,size:d(g,"size"),padding:d(g,"padding"),ripple:d(g,"ripple"),stack:d(g,"stack")===!0,stretch:d(g,"stretch")===!0,onClick($){D(C,c,$)}}}}));function D(c,m,i){e.readonly!==!0&&(e.modelValue===c?e.clearable===!0&&(s("update:modelValue",null,null),s("clear")):s("update:modelValue",c,m),s("click",i))}function d(c,m){return c[m]===void 0?e[m]:c[m]}function q(){const c=_.value.map(m=>w(B,m.props,m.slot!==void 0?n[m.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&f.value===!0&&S(c,"push"),qe(n.default,c)}return()=>w(Xe,{class:"q-btn-toggle",...o.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},q)}}),Ne=L({name:"QToggle",props:{...je,icon:String,iconColor:String},emits:We,setup(e){function n(s,f){const h=v(()=>(s.value===!0?e.checkedIcon:f.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),S=v(()=>s.value===!0?e.iconColor:null);return()=>[w("div",{class:"q-toggle__track"}),w("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},h.value!==void 0?[w(Y,{name:h.value,color:S.value})]:void 0)]}return Oe("toggle",n)}}),ge={radio:xe,checkbox:Te,toggle:Ne},Ke=Object.keys(ge);function X(e,n){if(typeof e=="function")return e;const s=e!==void 0?e:n;return f=>f[s]}const Je=L({name:"QOptionGroup",props:{...Ge,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(Qe),default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],name:String,type:{type:String,default:"radio",validator:e=>Ke.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:n,slots:s}){const{proxy:{$q:f}}=Ve(),h=Array.isArray(e.modelValue);e.type==="radio"?h===!0&&console.error("q-option-group: model should not be array"):h===!1&&console.error("q-option-group: model should be array in your case");const S=Ue(e,f),o=v(()=>ge[e.type]),b=v(()=>X(e.optionValue,"value")),_=v(()=>X(e.optionLabel,"label")),D=v(()=>X(e.optionDisable,"disable")),d=v(()=>e.options.map(i=>({val:b.value(i),name:i.name===void 0?e.name:i.name,disable:e.disable||D.value(i),leftLabel:i.leftLabel===void 0?e.leftLabel:i.leftLabel,color:i.color===void 0?e.color:i.color,checkedIcon:i.checkedIcon,uncheckedIcon:i.uncheckedIcon,dark:i.dark===void 0?S.value:i.dark,size:i.size===void 0?e.size:i.size,dense:e.dense,keepColor:i.keepColor===void 0?e.keepColor:i.keepColor}))),q=v(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),c=v(()=>{const i={role:"group"};return e.type==="radio"&&(i.role="radiogroup",e.disable===!0&&(i["aria-disabled"]="true")),i});function m(i){n("update:modelValue",i)}return()=>w("div",{class:q.value,...c.value},e.options.map((i,C)=>{const Q=s["label-"+C]!==void 0?()=>s["label-"+C](i):s.label!==void 0?()=>s.label(i):void 0;return w("div",[w(o.value,{label:Q===void 0?_.value(i):null,modelValue:e.modelValue,"onUpdate:modelValue":m,...d.value[C]},Q)])}))}}),N=Ie({name:"RelationshipPage",setup(){const e=u("listening"),n=u(!1),s=u(""),f=u(""),h=u(""),S=u(!1),o=u(!1),b=u({x:0,y:0}),_=u({x:0,y:0}),D=200,d=300,q=2.5,c=u(null),m=u({$el:document.createElement("div"),clientWidth:0,clientHeight:0}),i=v(()=>{if(!m.value?.$el)return"";const l=m.value.$el.querySelector("img");if(!l)return"";const p=l.naturalWidth/l.naturalHeight,E=l.clientWidth/l.clientHeight;return p>E?`${l.clientWidth*q}px auto`:`auto ${l.clientHeight*q}px`}),C={en:"Queen Elizabeth II married Prince Philip on November 20, 1947. They had four children: Charles, Anne, Andrew, and Edward.",zh:"伊莉莎白二世女王於1947年11月20日與菲利普親王結婚。他們育有四個孩子：查爾斯、安妮、安德魯和愛德華。"},Q=[C,{en:"Prince Charles and Diana had two children: William and Harry.",zh:"查爾斯王子和戴安娜育有兩個孩子：威廉和哈利。"},{en:"Prince William married Catherine on April 29, 2011. They have three children: George, Charlotte, and Louis.",zh:"威廉王子於2011年4月29日與凱薩琳結婚。他們育有三個孩子：喬治、夏洛特和路易。"},{en:"Queen Elizabeth II is the grandmother of Prince William and Prince Harry.",zh:"伊莉莎白二世女王是威廉王子和哈利王子的祖母。"}],g={question:{en:"Prince Charles is the ______ of Queen Elizabeth II.",zh:"查爾斯王子是伊莉莎白二世女王的______。"},options:[{label:{en:"father",zh:"父親"},value:"father"},{label:{en:"son",zh:"兒子"},value:"son"},{label:{en:"brother",zh:"兄弟"},value:"brother"}],answer:"son"},$=[g,{question:{en:"Prince George is the ______ of Princess Charlotte.",zh:"喬治王子是夏洛特公主的______。"},options:[{label:{en:"brother",zh:"兄弟"},value:"brother"},{label:{en:"uncle",zh:"叔叔"},value:"uncle"},{label:{en:"cousin",zh:"表親"},value:"cousin"}],answer:"brother"}],x={question:{en:"Who is the mother of Prince George?",zh:"喬治王子的母親是誰？"},answer:"Catherine",answerZh:"凱薩琳"},K=[x,{question:{en:"What is the relationship between Queen Elizabeth II and Prince Louis?",zh:"伊莉莎白二世女王與路易斯王子之間的關係是什麼？"},answer:"Great-grandmother",answerZh:"曾祖母"}],J=u(0),j=u(C),ee=u(0),W=u(g),ne=u(0),O=u(x),he=()=>{const l=new SpeechSynthesisUtterance(j.value.en);l.lang="en-GB",speechSynthesis.speak(l)},ve=()=>{const l=(J.value+1)%Q.length;J.value=l;const p=Q[l]??C;j.value=p},fe=()=>{const l=W.value;f.value===l.answer?s.value="答對了！":s.value=`答錯了。正確答案是：${l.answer}`,n.value=!0},pe=()=>{const l=(ee.value+1)%$.length;ee.value=l;const p=$[l]??g;W.value=p,f.value=""},ye=()=>{const l=O.value;h.value.toLowerCase()===l.answer.toLowerCase()?s.value="答對了！":s.value=`答錯了。正確答案是：${l.answer}`,n.value=!0},be=()=>{const l=(ne.value+1)%K.length;ne.value=l;const p=K[l]??x;O.value=p,h.value=""},Ce=u([{name:"Princess Eugenie",nameZh:"尤金妮公主"},{name:"Prince Edward",nameZh:"愛德華王子"},{name:"Zara Tindall",nameZh:"扎拉·廷德爾"},{name:"Catherine",nameZh:"凱薩琳"}]),ke=u([{en:"daughter of Prince Andrew",zh:"安德魯王子的女兒",correctPerson:"Princess Eugenie"},{en:"son of Queen Elizabeth II",zh:"伊莉莎白二世女王的兒子",correctPerson:"Prince Edward"},{en:"daughter of Princess Anne",zh:"安妮公主的女兒",correctPerson:"Zara Tindall"},{en:"mother of Prince George, Princess Charlotte, and Prince Louis",zh:"喬治王子、夏洛特公主和路易王子的母親",correctPerson:"Catherine"}]),A=u(null),P=u(null),T=u([]),ze=l=>{A.value=l,oe()},Be=l=>{P.value=l,oe()},oe=()=>{A.value&&P.value&&(P.value.correctPerson===A.value.name?(T.value.push({person:A.value,relation:P.value}),A.value=null,P.value=null):setTimeout(()=>{A.value=null,P.value=null},1e3))};return{gameMode:e,currentStory:j,currentQuiz:W,currentAdvanced:O,userAnswer:f,advancedAnswer:h,showResult:n,resultMessage:s,speakStory:he,nextStory:ve,checkAnswer:fe,nextQuiz:pe,checkAdvancedAnswer:ye,nextAdvanced:be,matchingPeople:Ce,matchingRelations:ke,selectedPerson:A,selectedRelation:P,matchedPairs:T,selectPerson:ze,selectRelation:Be,resetMatching:()=>{A.value=null,P.value=null,T.value=[]},showImageDialog:S,showMagnifier:o,magnifierPos:b,magnifierSize:D,magnifiedSize:d,zoomLevel:q,handleMouseMove:l=>{if(!c.value||!m.value?.$el)return;const p=c.value.getBoundingClientRect(),E=l.clientX-p.left,we=l.clientY-p.top,ae=m.value.$el.getBoundingClientRect(),Se=l.clientX-ae.left,_e=l.clientY-ae.top;b.value={x:Se,y:_e};let G=E+20,U=we;G+d>p.width&&(G=E-d-20),U+d>p.height&&(U=p.height-d),_.value={x:G,y:U}},handleClick:()=>{o.value=!o.value},imageContainer:c,mainImage:m,magnifiedPos:_,calculateBackgroundSize:i}}}),ce=()=>{De(e=>({"030c8d1a":e.magnifiedSize+"px"}))},me=N.setup;N.setup=me?(e,n)=>(ce(),me(e,n)):ce;const en={class:"row items-center q-mb-md"},nn={class:"col"},on={class:"row q-mb-lg justify-center"},an={class:"row q-mt-lg"},ln={class:"col-12 col-md-7 q-pr-md"},tn={class:"col-12 col-md-5"},sn={key:0,class:"game-section"},rn={class:"text-body1 q-mt-md"},un={class:"english-text"},dn={class:"chinese-text q-mt-sm"},cn={key:1,class:"game-section"},mn={class:"text-body1 q-mt-md"},gn={class:"english-text"},hn={class:"chinese-text q-mt-sm"},vn={class:"q-mt-md"},fn={key:2,class:"game-section"},pn={class:"matching-container q-mt-md"},yn={class:"people-list"},bn=["onClick"],Cn={class:"english-text"},kn={class:"chinese-text"},zn={class:"relations-list"},Bn=["onClick"],wn={class:"english-text"},Sn={class:"chinese-text"},_n={class:"matched-pairs q-mt-lg"},An={class:"pair-text"},Pn={key:3,class:"game-section"},qn={class:"text-body1 q-mt-md"},Qn={class:"english-text"},Vn={class:"chinese-text q-mt-sm"},In={class:"text-h6"};function Dn(e,n,s,f,h,S){return k(),$e(He,{class:"q-pa-md"},{default:r(()=>[t("div",en,[t("h1",nn,[a(Y,{name:"people",size:"md",color:"primary",class:"q-mr-sm"}),n[8]||(n[8]=Ee(" 英國皇室家族關係稱謂學習 "))])]),t("div",on,[a(Ye,{modelValue:e.gameMode,"onUpdate:modelValue":n[0]||(n[0]=o=>e.gameMode=o),options:[{label:"聽力練習",value:"listening"},{label:"填空練習",value:"quiz"},{label:"配對題",value:"matching"},{label:"進階測驗",value:"advanced"}],color:"primary",class:"q-mb-md"},null,8,["modelValue"])]),t("div",an,[t("div",ln,[a(re,{src:"https://en.alearn.org.tw/images/royal_family.jpg",class:"family-tree-image cursor-pointer",fit:"contain",onClick:n[1]||(n[1]=o=>e.showImageDialog=!0)},{loading:r(()=>[a(se,{color:"primary"})]),_:1})]),t("div",tn,[e.gameMode==="listening"?(k(),z("div",sn,[a(I,{class:"story-card"},{default:r(()=>[a(V,null,{default:r(()=>[n[9]||(n[9]=t("div",{class:"text-h6"},"家族故事 | Family Story",-1)),t("div",rn,[t("div",un,y(e.currentStory.en),1),t("div",dn,y(e.currentStory.zh),1)])]),_:1}),a(M,{align:"center"},{default:r(()=>[a(B,{color:"primary",icon:"volume_up",label:"播放故事",onClick:e.speakStory},null,8,["onClick"]),a(B,{color:"secondary",icon:"skip_next",label:"下一個",onClick:e.nextStory},null,8,["onClick"])]),_:1})]),_:1})])):F("",!0),e.gameMode==="quiz"?(k(),z("div",cn,[a(I,{class:"quiz-card"},{default:r(()=>[a(V,null,{default:r(()=>[n[10]||(n[10]=t("div",{class:"text-h6"},"關係稱謂填空 | Relationship Quiz",-1)),t("div",mn,[t("div",gn,y(e.currentQuiz.question.en),1),t("div",hn,y(e.currentQuiz.question.zh),1)]),t("div",vn,[a(Je,{modelValue:e.userAnswer,"onUpdate:modelValue":[n[2]||(n[2]=o=>e.userAnswer=o),e.checkAnswer],options:e.currentQuiz.options.map(o=>({label:`${o.label.en} (${o.label.zh})`,value:o.value})),type:"radio"},null,8,["modelValue","options","onUpdate:modelValue"])])]),_:1}),a(M,{align:"center"},{default:r(()=>[a(B,{color:"primary",icon:"check_circle",label:"檢查答案",onClick:e.checkAnswer,disable:!e.userAnswer},null,8,["onClick","disable"]),a(B,{color:"secondary",icon:"skip_next",label:"下一題",onClick:e.nextQuiz},null,8,["onClick"])]),_:1})]),_:1})])):F("",!0),e.gameMode==="matching"?(k(),z("div",fn,[a(I,{class:"matching-card"},{default:r(()=>[a(V,null,{default:r(()=>[n[11]||(n[11]=t("div",{class:"text-h6"},"皇室關係配對 | Royal Family Matching",-1)),t("div",pn,[t("div",yn,[(k(!0),z(Z,null,H(e.matchingPeople,(o,b)=>(k(),z("div",{key:"person-"+b,class:le(["person-item",{selected:e.selectedPerson===o}]),onClick:_=>e.selectPerson(o)},[t("div",Cn,y(o.name),1),t("div",kn,y(o.nameZh),1)],10,bn))),128))]),t("div",zn,[(k(!0),z(Z,null,H(e.matchingRelations,(o,b)=>(k(),z("div",{key:"relation-"+b,class:le(["relation-item",{selected:e.selectedRelation===o}]),onClick:_=>e.selectRelation(o)},[t("div",wn,y(o.en),1),t("div",Sn,y(o.zh),1)],10,Bn))),128))])]),t("div",_n,[(k(!0),z(Z,null,H(e.matchedPairs,(o,b)=>(k(),z("div",{key:"pair-"+b,class:"matched-pair"},[a(Y,{name:"check_circle",color:"positive"}),t("span",An,y(o.person.name)+" → "+y(o.relation.en),1)]))),128))])]),_:1}),a(M,{align:"center"},{default:r(()=>[a(B,{color:"primary",icon:"refresh",label:"重新開始",onClick:e.resetMatching},null,8,["onClick"])]),_:1})]),_:1})])):F("",!0),e.gameMode==="advanced"?(k(),z("div",Pn,[a(I,{class:"advanced-card"},{default:r(()=>[a(V,null,{default:r(()=>[n[12]||(n[12]=t("div",{class:"text-h6"},"進階關係描述 | Advanced Relationship",-1)),t("div",qn,[t("div",Qn,y(e.currentAdvanced.question.en),1),t("div",Vn,y(e.currentAdvanced.question.zh),1)]),a(Ze,{modelValue:e.advancedAnswer,"onUpdate:modelValue":n[3]||(n[3]=o=>e.advancedAnswer=o),outlined:"",label:"請輸入答案",class:"q-mt-md",onKeyup:Fe(e.checkAdvancedAnswer,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),a(M,{align:"center"},{default:r(()=>[a(B,{color:"primary",icon:"check_circle",label:"檢查答案",onClick:e.checkAdvancedAnswer},null,8,["onClick"]),a(B,{color:"secondary",icon:"skip_next",label:"下一題",onClick:e.nextAdvanced},null,8,["onClick"])]),_:1})]),_:1})])):F("",!0)])]),a(de,{modelValue:e.showResult,"onUpdate:modelValue":n[4]||(n[4]=o=>e.showResult=o)},{default:r(()=>[a(I,null,{default:r(()=>[a(V,null,{default:r(()=>[t("div",In,y(e.resultMessage),1)]),_:1}),a(M,{align:"right"},{default:r(()=>[R(a(B,{flat:"",label:"關閉",color:"primary"},null,512),[[ue]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(de,{modelValue:e.showImageDialog,"onUpdate:modelValue":n[7]||(n[7]=o=>e.showImageDialog=o)},{default:r(()=>[a(I,{style:{width:"90vw","max-width":"1200px"}},{default:r(()=>[a(V,{class:"row items-center justify-end"},{default:r(()=>[R(a(B,{icon:"close",flat:"",round:"",dense:""},null,512),[[ue]])]),_:1}),a(V,{class:"q-pa-none relative-position"},{default:r(()=>[t("div",{class:"image-container",onMousemove:n[5]||(n[5]=(...o)=>e.handleMouseMove&&e.handleMouseMove(...o)),onClick:n[6]||(n[6]=(...o)=>e.handleClick&&e.handleClick(...o)),ref:"imageContainer"},[a(re,{src:"https://en.alearn.org.tw/images/royal_family.jpg",style:{"max-height":"85vh"},fit:"contain",ref:"mainImage"},{loading:r(()=>[a(se,{color:"primary"})]),_:1},512),R(t("div",{class:"magnifier-frame",style:ie({left:`${e.magnifierPos.x-e.magnifierSize/2}px`,top:`${e.magnifierPos.y-e.magnifierSize/2}px`,width:`${e.magnifierSize}px`,height:`${e.magnifierSize}px`,backgroundImage:"url(https://en.alearn.org.tw/images/royal_family.jpg)",backgroundPosition:`${-e.magnifierPos.x*e.zoomLevel+e.magnifierSize/2}px ${-e.magnifierPos.y*e.zoomLevel+e.magnifierSize/2}px`,backgroundSize:e.calculateBackgroundSize})},null,4),[[te,e.showMagnifier]]),R(t("div",{class:"magnified-view",style:ie({backgroundImage:"url(https://en.alearn.org.tw/images/royal_family.jpg)",backgroundPosition:`${-e.magnifierPos.x*e.zoomLevel+e.magnifiedSize/2}px ${-e.magnifierPos.y*e.zoomLevel+e.magnifiedSize/2}px`,backgroundSize:e.calculateBackgroundSize,left:e.magnifiedPos.x+"px",top:e.magnifiedPos.y+"px"})},null,4),[[te,e.showMagnifier]])],544)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const no=Me(N,[["render",Dn],["__scopeId","data-v-47427304"],["__file","RelationshipPage.vue"]]);export{no as default};
