import{N as h,r as m,_,P as u,R as v,S as r,V as t,U as a,Q as k,X as C,W as d,a0 as c,a2 as E,a1 as Q,$ as b,Y as D}from"./index-T3pzRoQa.js";import{Q as S}from"./QInput-mdBLuTQw.js";import{Q as w}from"./QSpinnerDots-ZfEL21wM.js";import{Q as p}from"./QCardSection-DS3wLXiR.js";import{Q as y}from"./QCard-DpcXnXDG.js";import{Q as B}from"./QImg-BzPhWlav.js";import{Q as P}from"./QPage-C3-qOJY4.js";import"./use-file-dom-props-DymkBDVa.js";import"./use-id-NnCWL-jW.js";import"./use-dark-CX6Hn8ya.js";import"./focus-manager-BJWzFvJg.js";import"./use-timeout-Vf0zXUWx.js";const q=h({name:"PlaybackPage",setup(){const o=m(""),s=m([]),l=m(!1);return{userStory:o,emotions:s,loading:l,analyzeEmotion:async()=>{if(o.value.trim()){l.value=!0;try{const e=await(await fetch(`https://zh-en-backend.alearn13994229.workers.dev/playback/${encodeURIComponent(o.value)}`)).json();s.value=e.emotions.map(i=>({name:i,imageUrl:e.images[i]}))}catch(n){console.error("Error analyzing emotion:",n)}finally{l.value=!1}}},speakEmotion:n=>{const e=new SpeechSynthesisUtterance(n);e.lang="en-US",e.rate=.8,speechSynthesis.speak(e)}}}}),V={class:"row items-center q-mb-md"},U={class:"col"},$={class:"row q-col-gutter-md"},x={class:"col-12 col-md-6"},z={class:"text-center"},F={key:0,class:"col-12 col-md-6"},I={class:"emotion-grid"},N={class:"text-subtitle1 q-mt-sm"};function A(o,s,l,f,g,n){return u(),v(P,{class:"q-pa-md"},{default:r(()=>[t("div",V,[t("h1",U,[a(k,{name:"psychology",size:"md",color:"primary",class:"q-mr-sm"}),s[1]||(s[1]=C(" 今日回顧 | Daily Reflection "))])]),t("div",$,[t("div",x,[a(y,{class:"rpg-card"},{default:r(()=>[a(p,null,{default:r(()=>[s[2]||(s[2]=t("div",{class:"text-h6 q-mb-md"},"分享今天最深刻的經歷",-1)),a(S,{modelValue:o.userStory,"onUpdate:modelValue":s[0]||(s[0]=e=>o.userStory=e),type:"textarea",rows:"6",outlined:"",placeholder:`請用英文或中文描述...
Please describe in English or Chinese...`,class:"q-mb-md"},null,8,["modelValue"]),t("div",z,[a(d,{color:"primary",label:"分析情緒",loading:o.loading,onClick:o.analyzeEmotion,class:"rpg-button"},{loading:r(()=>[a(w)]),_:1},8,["loading","onClick"])])]),_:1})]),_:1})]),o.emotions.length>0?(u(),c("div",F,[a(y,{class:"rpg-card"},{default:r(()=>[a(p,null,{default:r(()=>[s[3]||(s[3]=t("div",{class:"text-h6 q-mb-md"},"情緒分析結果",-1)),t("div",I,[(u(!0),c(E,null,Q(o.emotions,(e,i)=>(u(),c("div",{key:i,class:"emotion-item"},[a(B,{src:e.imageUrl,"spinner-color":"primary",style:{height:"200px","max-width":"200px"},class:"rounded-borders"},null,8,["src"]),t("div",N,b(e.name),1),a(d,{flat:"",round:"",color:"primary",icon:"volume_up",onClick:R=>o.speakEmotion(e.name)},null,8,["onClick"])]))),128))])]),_:1})]),_:1})])):D("",!0)])]),_:1})}const Z=_(q,[["render",A],["__scopeId","data-v-9501776e"],["__file","PlaybackPage.vue"]]);export{Z as default};
